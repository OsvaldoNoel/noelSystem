import UIElement from"./ui-element.js";import{arrowPrev,arrowNext}from"./button-arrow.js";import closeButton from"./button-close.js";import zoomButton from"./button-zoom.js";import{loadingIndicator}from"./loading-indicator.js";import{counterIndicator}from"./counter-indicator.js";function setZoomedIn(t,o){t.classList.toggle("pswp--zoomed-in",o)}class UI{constructor(t){this.pswp=t,this.isRegistered=!1,this.uiElementsData=[],this.items=[],this.updatePreloaderVisibility=()=>{},this._lastUpdatedZoomLevel=void 0}init(){const{pswp:t}=this;this.isRegistered=!1,this.uiElementsData=[closeButton,arrowPrev,arrowNext,zoomButton,loadingIndicator,counterIndicator],t.dispatch("uiRegister"),this.uiElementsData.sort(((t,o)=>(t.order||0)-(o.order||0))),this.items=[],this.isRegistered=!0,this.uiElementsData.forEach((t=>{this.registerElement(t)})),t.on("change",(()=>{t.element?.classList.toggle("pswp--one-slide",1===t.getNumItems())})),t.on("zoomPanUpdate",(()=>this._onZoomPanUpdate()))}registerElement(t){this.isRegistered?this.items.push(new UIElement(this.pswp,t)):this.uiElementsData.push(t)}_onZoomPanUpdate(){const{template:t,currSlide:o,options:e}=this.pswp;if(this.pswp.opener.isClosing||!t||!o)return;let{currZoomLevel:s}=o;if(this.pswp.opener.isOpen||(s=o.zoomLevels.initial),s===this._lastUpdatedZoomLevel)return;this._lastUpdatedZoomLevel=s;const i=o.zoomLevels.initial-o.zoomLevels.secondary;if(Math.abs(i)<.01||!o.isZoomable())return setZoomedIn(t,!1),void t.classList.remove("pswp--zoom-allowed");t.classList.add("pswp--zoom-allowed");setZoomedIn(t,(s===o.zoomLevels.initial?o.zoomLevels.secondary:o.zoomLevels.initial)<=s),"zoom"!==e.imageClickAction&&"zoom-or-close"!==e.imageClickAction||t.classList.add("pswp--click-to-zoom")}}export default UI;