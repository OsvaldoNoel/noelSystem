import SpringEaser from"./spring-easer.js";class SpringAnimation{constructor(t){this.props=t,this._raf=0;const{start:a,end:i,velocity:n,onUpdate:s,onComplete:e,onFinish:r=(()=>{}),dampingRatio:o,naturalFrequency:h}=t;this.onFinish=r;const m=new SpringEaser(n,o,h);let p=Date.now(),c=a-i;const f=()=>{this._raf&&(c=m.easeFrame(c,Date.now()-p),Math.abs(c)<1&&Math.abs(m.velocity)<50?(s(i),e&&e(),this.onFinish()):(p=Date.now(),s(c+i),this._raf=requestAnimationFrame(f)))};this._raf=requestAnimationFrame(f)}destroy(){this._raf>=0&&cancelAnimationFrame(this._raf),this._raf=0}}export default SpringAnimation;