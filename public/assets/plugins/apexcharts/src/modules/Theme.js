import Utils from"../utils/Utils";export default class Theme{constructor(o){this.ctx=o,this.colors=[],this.w=o.w;const s=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===s.config.chart.type&&s.config.plotOptions.treemap.distributed||"heatmap"===s.config.chart.type&&s.config.plotOptions.heatmap.distributed,this.isBarDistributed=s.config.plotOptions.bar.distributed&&("bar"===s.config.chart.type||"rangeBar"===s.config.chart.type)}init(){this.setDefaultColors()}setDefaultColors(){let o=this.w,s=new Utils;if(o.globals.dom.elWrap.classList.add(`apexcharts-theme-${o.config.theme.mode}`),void 0===o.config.colors||0===o.config.colors?.length?o.globals.colors=this.predefined():(o.globals.colors=o.config.colors,Array.isArray(o.config.colors)&&o.config.colors.length>0&&"function"==typeof o.config.colors[0]&&(o.globals.colors=o.config.series.map(((s,l)=>{let e=o.config.colors[l];return e||(e=o.config.colors[0]),"function"==typeof e?(this.isColorFn=!0,e({value:o.globals.axisCharts?o.globals.series[l][0]?o.globals.series[l][0]:0:o.globals.series[l],seriesIndex:l,dataPointIndex:l,w:o})):e})))),o.globals.seriesColors.map(((s,l)=>{s&&(o.globals.colors[l]=s)})),o.config.theme.monochrome.enabled){let l=[],e=o.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(e=o.globals.series[0].length*o.globals.series.length);let t=o.config.theme.monochrome.color,a=1/(e/o.config.theme.monochrome.shadeIntensity),r=o.config.theme.monochrome.shadeTo,i=0;for(let o=0;o<e;o++){let o;"dark"===r?(o=s.shadeColor(-1*i,t),i+=a):(o=s.shadeColor(i,t),i+=a),l.push(o)}o.globals.colors=l.slice()}const l=o.globals.colors.slice();this.pushExtraColors(o.globals.colors);["fill","stroke"].forEach((s=>{void 0===o.config[s].colors?o.globals[s].colors=this.isColorFn?o.config.colors:l:o.globals[s].colors=o.config[s].colors.slice(),this.pushExtraColors(o.globals[s].colors)})),void 0===o.config.dataLabels.style.colors?o.globals.dataLabels.style.colors=l:o.globals.dataLabels.style.colors=o.config.dataLabels.style.colors.slice(),this.pushExtraColors(o.globals.dataLabels.style.colors,50),void 0===o.config.plotOptions.radar.polygons.fill.colors?o.globals.radarPolygons.fill.colors=["dark"===o.config.theme.mode?"#424242":"none"]:o.globals.radarPolygons.fill.colors=o.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(o.globals.radarPolygons.fill.colors,20),void 0===o.config.markers.colors?o.globals.markers.colors=l:o.globals.markers.colors=o.config.markers.colors.slice(),this.pushExtraColors(o.globals.markers.colors)}pushExtraColors(o,s,l=null){let e=this.w,t=s||e.globals.series.length;if(null===l&&(l=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===e.config.chart.type&&e.config.plotOptions.heatmap.colorScale.inverse),l&&e.globals.series.length&&(t=e.globals.series[e.globals.maxValsInArrayIndex].length*e.globals.series.length),o.length<t){let s=t-o.length;for(let l=0;l<s;l++)o.push(o[l])}}updateThemeOptions(o){o.chart=o.chart||{},o.tooltip=o.tooltip||{};const s=o.theme.mode,l="dark"===s?"#424242":"light"===s?"#fff":o.chart.background||"#fff",e="dark"===s?"palette4":"light"===s?"palette1":o.theme.palette||"palette1",t="dark"===s?"#f6f7f8":"light"===s?"#373d3f":o.chart.foreColor||"#373d3f";return o.tooltip.theme=s||"light",o.chart.foreColor=t,o.chart.background=l,o.theme.palette=e,o}predefined(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}