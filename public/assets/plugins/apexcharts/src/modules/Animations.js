import Utils from"../utils/Utils";export default class Animations{constructor(a){this.ctx=a,this.w=a.w,this.setEasingFunctions()}setEasingFunctions(){let a;if(this.w.globals.easing)return;switch(this.w.config.chart.animations.easing){case"linear":a="-";break;case"easein":a="<";break;case"easeout":a=">";break;case"easeinout":default:a="<>";break;case"swing":a=a=>{let t=1.70158;return(a-=1)*a*((t+1)*a+t)+1};break;case"bounce":a=a=>{let t="";return t=a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,t};break;case"elastic":a=a=>a===!!a?a:Math.pow(2,-10*a)*Math.sin((a-.075)*(2*Math.PI)/.3)+1}this.w.globals.easing=a}animateLine(a,t,e,i){a.attr(t).animate(i).attr(e)}animateMarker(a,t,e,i,n,s){t||(t=0),a.attr({r:t,width:t,height:t}).animate(i,n).attr({r:e,width:e.width,height:e.height}).afterAll((()=>{s()}))}animateCircle(a,t,e,i,n){a.attr({r:t.r,cx:t.cx,cy:t.cy}).animate(i,n).attr({r:e.r,cx:e.cx,cy:e.cy})}animateRect(a,t,e,i,n){a.attr(t).animate(i).attr(e).afterAll((()=>n()))}animatePathsGradually(a){let{el:t,realIndex:e,j:i,fill:n,pathFrom:s,pathTo:l,speed:o,delay:r}=a,h=this.w,c=0;h.config.chart.animations.animateGradually.enabled&&(c=h.config.chart.animations.animateGradually.delay),h.config.chart.animations.dynamicAnimation.enabled&&h.globals.dataChanged&&"bar"!==h.config.chart.type&&(c=0),this.morphSVG(t,e,i,"line"!==h.config.chart.type||h.globals.comboCharts?n:"stroke",s,l,o,r*c)}showDelayedElements(){this.w.globals.delayedElements.forEach((a=>{const t=a.el;t.classList.remove("apexcharts-element-hidden"),t.classList.add("apexcharts-hidden-element-shown")}))}animationCompleted(a){const t=this.w;t.globals.animationEnded||(t.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof t.config.chart.events.animationEnd&&t.config.chart.events.animationEnd(this.ctx,{el:a,w:t}))}morphSVG(a,t,e,i,n,s,l,o){let r=this.w;n||(n=a.attr("pathFrom")),s||(s=a.attr("pathTo"));const h=a=>("radar"===r.config.chart.type&&(l=1),`M 0 ${r.globals.gridHeight}`);(!n||n.indexOf("undefined")>-1||n.indexOf("NaN")>-1)&&(n=h()),(!s||s.indexOf("undefined")>-1||s.indexOf("NaN")>-1)&&(s=h()),r.globals.shouldAnimate||(l=1),a.plot(n).animate(1,r.globals.easing,o).plot(n).animate(l,r.globals.easing,o).plot(s).afterAll((()=>{Utils.isNumber(e)?e===r.globals.series[r.globals.maxValsInArrayIndex].length-2&&r.globals.shouldAnimate&&this.animationCompleted(a):"none"!==i&&r.globals.shouldAnimate&&(!r.globals.comboCharts&&t===r.globals.series.length-1||r.globals.comboCharts)&&this.animationCompleted(a),this.showDelayedElements()}))}}