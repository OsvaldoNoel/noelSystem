import Helpers from"./Helpers";import AxesUtils from"../axes/AxesUtils";export default class YAnnotations{constructor(t){this.w=t.w,this.annoCtx=t,this.helpers=new Helpers(this.annoCtx),this.axesUtils=new AxesUtils(this.annoCtx)}addYaxisAnnotation(t,s,i){let e,a=this.w,l=t.strokeDashArray,o=this.helpers.getY1Y2("y1",t),n=o.yP,d=o.clipped,r=!0,h=!1;const x=t.label.text;if(null===t.y2||void 0===t.y2){if(!d){h=!0;let i=this.annoCtx.graphics.drawLine(0+t.offsetX,n+t.offsetY,this._getYAxisAnnotationWidth(t),n+t.offsetY,t.borderColor,l,t.borderWidth);s.appendChild(i.node),t.id&&i.node.classList.add(t.id)}}else{if(o=this.helpers.getY1Y2("y2",t),e=o.yP,r=o.clipped,e>n){let t=n;n=e,e=t}if(!d||!r){h=!0;let i=this.annoCtx.graphics.drawRect(0+t.offsetX,e+t.offsetY,this._getYAxisAnnotationWidth(t),n-e,0,t.fillColor,t.opacity,1,t.borderColor,l);i.node.classList.add("apexcharts-annotation-rect"),i.attr("clip-path",`url(#gridRectMask${a.globals.cuid})`),s.appendChild(i.node),t.id&&i.node.classList.add(t.id)}}if(h){let l="right"===t.label.position?a.globals.gridWidth:"center"===t.label.position?a.globals.gridWidth/2:0,o=this.annoCtx.graphics.drawText({x:l+t.label.offsetX,y:(null!=e?e:n)+t.label.offsetY-3,text:x,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:`apexcharts-yaxis-annotation-label ${t.label.style.cssClass} ${t.id?t.id:""}`});o.attr({rel:i}),s.appendChild(o.node)}}_getYAxisAnnotationWidth(t){const s=this.w;let i=s.globals.gridWidth;return i=t.width.indexOf("%")>-1?s.globals.gridWidth*parseInt(t.width,10)/100:parseInt(t.width,10),i+t.offsetX}drawYAxisAnnotations(){const t=this.w;let s=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return t.config.annotations.yaxis.forEach(((t,i)=>{t.yAxisIndex=this.axesUtils.translateYAxisIndex(t.yAxisIndex),this.axesUtils.isYAxisHidden(t.yAxisIndex)&&this.axesUtils.yAxisAllSeriesCollapsed(t.yAxisIndex)||this.addYaxisAnnotation(t,s.node,i)})),s}}