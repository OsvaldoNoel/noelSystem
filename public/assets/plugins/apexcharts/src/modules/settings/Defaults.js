import Utils from"../../utils/Utils";import DateTime from"../../utils/DateTime";import Formatters from"../Formatters";const getRangeValues=({isTimeline:e,ctx:t,seriesIndex:a,dataPointIndex:s,y1:o,y2:i,w:r})=>{let l=r.globals.seriesRangeStart[a][s],n=r.globals.seriesRangeEnd[a][s],d=r.globals.labels[s],c=r.config.series[a].name?r.config.series[a].name:"";const p=r.globals.ttKeyFormatter,h=r.config.tooltip.y.title.formatter,b={w:r,seriesIndex:a,dataPointIndex:s,start:l,end:n};if("function"==typeof h&&(c=h(c,b)),r.config.series[a].data[s]?.x&&(d=r.config.series[a].data[s].x),!e&&"datetime"===r.config.xaxis.type){d=new Formatters(t).xLabelFormat(r.globals.ttKeyFormatter,d,d,{i:void 0,dateFormatter:new DateTime(t).formatDate,w:r})}"function"==typeof p&&(d=p(d,b)),Number.isFinite(o)&&Number.isFinite(i)&&(l=o,n=i);let f="",g="";const m=r.globals.colors[a];if(void 0===r.config.tooltip.x.formatter)if("datetime"===r.config.xaxis.type){let e=new DateTime(t);f=e.formatDate(e.getDate(l),r.config.tooltip.x.format),g=e.formatDate(e.getDate(n),r.config.tooltip.x.format)}else f=l,g=n;else f=r.config.tooltip.x.formatter(l),g=r.config.tooltip.x.formatter(n);return{start:l,end:n,startVal:f,endVal:g,ylabel:d,color:m,seriesName:c}},buildRangeTooltipHTML=e=>{let{color:t,seriesName:a,ylabel:s,start:o,end:i,seriesIndex:r,dataPointIndex:l}=e;const n=e.ctx.tooltip.tooltipLabels.getFormatters(r);o=n.yLbFormatter(o),i=n.yLbFormatter(i);const d=n.yLbFormatter(e.w.globals.series[r][l]);let c="";const p=`<span class="value start-value">\n  ${o}\n  </span> <span class="separator">-</span> <span class="value end-value">\n  ${i}\n  </span>`;return c=e.w.globals.comboCharts?"rangeArea"===e.w.config.series[r].type||"rangeBar"===e.w.config.series[r].type?p:`<span>${d}</span>`:p,'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+t+'">'+(a||"")+'</span></div><div> <span class="category">'+s+": </span> "+c+" </div></div>"};export default class Defaults{constructor(e){this.opts=e}hideYAxis(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}line(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}sparkline(e){this.hideYAxis();return Utils.extend(e,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}slope(){return this.hideYAxis(),{chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!0,formatter(e,t){const a=t.w.config.series[t.seriesIndex].name;return null!==e?a+": "+e:""},background:{enabled:!1},offsetX:-5},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},xaxis:{position:"top",labels:{style:{fontSize:14,fontWeight:900}},tooltip:{enabled:!1},crosshairs:{show:!1}},markers:{size:8,hover:{sizeOffset:1}},legend:{show:!1},tooltip:{shared:!1,intersect:!0,followCursor:!0},stroke:{width:5,curve:"straight"}}}bar(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}funnel(){return this.hideYAxis(),{...this.bar(),chart:{animations:{easing:"linear",speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}}}candlestick(){return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:({seriesIndex:e,dataPointIndex:t,w:a})=>this._getBoxTooltip(a,e,t,["Open","High","","Low","Close"],"candlestick")},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}boxPlot(){return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:({seriesIndex:e,dataPointIndex:t,w:a})=>this._getBoxTooltip(a,e,t,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}rangeBar(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter(e,{ctx:t,seriesIndex:a,dataPointIndex:s,w:o}){const i=()=>{const e=o.globals.seriesRangeStart[a][s];return o.globals.seriesRangeEnd[a][s]-e};return o.globals.comboCharts?"rangeBar"===o.config.series[a].type||"rangeArea"===o.config.series[a].type?i():e:i()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:e=>e.w.config.plotOptions&&e.w.config.plotOptions.bar&&e.w.config.plotOptions.bar.horizontal?(e=>{const{color:t,seriesName:a,ylabel:s,startVal:o,endVal:i}=getRangeValues({...e,isTimeline:!0});return buildRangeTooltipHTML({...e,color:t,seriesName:a,ylabel:s,start:o,end:i})})(e):(e=>{const{color:t,seriesName:a,ylabel:s,start:o,end:i}=getRangeValues(e);return buildRangeTooltipHTML({...e,color:t,seriesName:a,ylabel:s,start:o,end:i})})(e)},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}dumbbell(e){return e.plotOptions.bar?.barHeight||(e.plotOptions.bar.barHeight=2),e.plotOptions.bar?.columnWidth||(e.plotOptions.bar.columnWidth=2),e}area(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}rangeArea(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:e=>(e=>{const{color:t,seriesName:a,ylabel:s,start:o,end:i}=getRangeValues(e);return buildRangeTooltipHTML({...e,color:t,seriesName:a,ylabel:s,start:o,end:i})})(e)}}}brush(e){return Utils.extend(e,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}stacked100(e){e.dataLabels=e.dataLabels||{},e.dataLabels.formatter=e.dataLabels.formatter||void 0;const t=e.dataLabels.formatter;e.yaxis.forEach(((t,a)=>{e.yaxis[a].min=0,e.yaxis[a].max=100}));return"bar"===e.chart.type&&(e.dataLabels.formatter=t||function(e){return"number"==typeof e&&e?e.toFixed(0)+"%":e}),e}stackedBars(){const e=this.bar();return{...e,plotOptions:{...e.plotOptions,bar:{...e.plotOptions.bar,borderRadiusApplication:"end",borderRadiusWhenStacked:"last"}}}}convertCatToNumeric(e){return e.xaxis.convertedCatToNumeric=!0,e}convertCatToNumericXaxis(e,t,a){e.xaxis.type="numeric",e.xaxis.labels=e.xaxis.labels||{},e.xaxis.labels.formatter=e.xaxis.labels.formatter||function(e){return Utils.isNumber(e)?Math.floor(e):e};const s=e.xaxis.labels.formatter;let o=e.xaxis.categories&&e.xaxis.categories.length?e.xaxis.categories:e.labels;return a&&a.length&&(o=a.map((e=>Array.isArray(e)?e:String(e)))),o&&o.length&&(e.xaxis.labels.formatter=function(e){return Utils.isNumber(e)?s(o[Math.floor(e)-1]):s(e)}),e.xaxis.categories=[],e.labels=[],e.xaxis.tickAmount=e.xaxis.tickAmount||"dataPoints",e}bubble(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}scatter(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}heatmap(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}treemap(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{opacity:1,gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}pie(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:e=>e.toFixed(1)+"%",style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}donut(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:e=>e.toFixed(1)+"%",style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}polarArea(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:e=>e.toFixed(1)+"%",enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}radar(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:e=>e,style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}radialBar(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}_getBoxTooltip(e,t,a,s,o){const i=e.globals.seriesCandleO[t][a],r=e.globals.seriesCandleH[t][a],l=e.globals.seriesCandleM[t][a],n=e.globals.seriesCandleL[t][a],d=e.globals.seriesCandleC[t][a];return e.config.series[t].type&&e.config.series[t].type!==o?`<div class="apexcharts-custom-tooltip">\n          ${e.config.series[t].name?e.config.series[t].name:"series-"+(t+1)}: <strong>${e.globals.series[t][a]}</strong>\n        </div>`:`<div class="apexcharts-tooltip-box apexcharts-tooltip-${e.config.chart.type}"><div>${s[0]}: <span class="value">`+i+"</span></div>"+`<div>${s[1]}: <span class="value">`+r+"</span></div>"+(l?`<div>${s[2]}: <span class="value">`+l+"</span></div>":"")+`<div>${s[3]}: <span class="value">`+n+"</span></div>"+`<div>${s[4]}: <span class="value">`+d+"</span></div></div>"}}