import Graphics from"../Graphics";import Utils from"../../utils/Utils";import AxesUtils from"../axes/AxesUtils";export default class DimYAxis{constructor(t){this.w=t.w,this.dCtx=t}getyAxisLabelsCoords(){let t=this.w,i=[],e=10;const s=new AxesUtils(this.dCtx.ctx);return t.config.yaxis.map(((l,o)=>{const h={seriesIndex:o,dataPointIndex:-1,w:t},a=t.globals.yAxisScale[o];let n=0;if(!s.isYAxisHidden(o)&&l.labels.show&&void 0!==l.labels.minWidth&&(n=l.labels.minWidth),!s.isYAxisHidden(o)&&l.labels.show&&a.result.length){let s=t.globals.yLabelFormatters[o],r=a.niceMin===Number.MIN_VALUE?0:a.niceMin,d=a.result.reduce(((t,i)=>String(s(t,h))?.length>String(s(i,h))?.length?t:i),r);d=s(d,h);let g=d;if(void 0!==d&&0!==d.length||(d=a.niceMax),t.globals.isBarHorizontal){e=0;let i=t.globals.labels.slice();d=Utils.getLargestStringFromArr(i),d=s(d,{seriesIndex:o,dataPointIndex:-1,w:t}),g=this.dCtx.dimHelpers.getLargestStringFromMultiArr(d,i)}let x=new Graphics(this.dCtx.ctx),c="rotate(".concat(l.labels.rotate," 0 0)"),w=x.getTextRects(d,l.labels.style.fontSize,l.labels.style.fontFamily,c,!1),b=w;d!==g&&(b=x.getTextRects(g,l.labels.style.fontSize,l.labels.style.fontFamily,c,!1)),i.push({width:(n>b.width||n>w.width?n:b.width>w.width?b.width:w.width)+e,height:b.height>w.height?b.height:w.height})}else i.push({width:0,height:0})})),i}getyAxisTitleCoords(){let t=this.w,i=[];return t.config.yaxis.map(((t,e)=>{if(t.show&&void 0!==t.title.text){let e=new Graphics(this.dCtx.ctx),s="rotate(".concat(t.title.rotate," 0 0)"),l=e.getTextRects(t.title.text,t.title.style.fontSize,t.title.style.fontFamily,s,!1);i.push({width:l.width,height:l.height})}else i.push({width:0,height:0})})),i}getTotalYAxisWidth(){let t=this.w,i=0,e=0,s=0,l=t.globals.yAxisScale.length>1?10:0;const o=new AxesUtils(this.dCtx.ctx),h=(h,a)=>{let n=t.config.yaxis[a].floating,r=0;h.width>0&&!n?(r=h.width+l,function(i){return t.globals.ignoreYAxisIndexes.indexOf(i)>-1}(a)&&(r=r-h.width-l)):r=n||o.isYAxisHidden(a)?0:5,t.config.yaxis[a].opposite?s+=r:e+=r,i+=r};return t.globals.yLabelsCoords.map(((t,i)=>{h(t,i)})),t.globals.yTitleCoords.map(((t,i)=>{h(t,i)})),t.globals.isBarHorizontal&&!t.config.yaxis[0].floating&&(i=t.globals.yLabelsCoords[0].width+t.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=e,this.dCtx.yAxisWidthRight=s,i}}