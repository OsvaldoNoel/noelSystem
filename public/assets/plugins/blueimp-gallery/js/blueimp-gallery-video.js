!function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],e):e(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}((function(e,o){"use strict";var t=o.prototype;e.extend(t.options,{videoContentClass:"video-content",videoLoadingClass:"video-loading",videoPlayingClass:"video-playing",videoIframeClass:"video-iframe",videoCoverClass:"video-cover",videoPlayClass:"video-play",videoPlaysInline:!0,videoPreloadProperty:"preload",videoPosterProperty:"poster"});var i=t.handleSlide;return e.extend(t,{handleSlide:function(e,o){i.call(this,e,o),this.setTimeout((function(){this.activeVideo&&this.activeVideo.pause()}))},videoFactory:function(o,t,i){var s,a,l,n=this,r=this.options,d=this.elementPrototype.cloneNode(!1),p=e(d),v=[{type:"error",target:d}],c=i||document.createElement("video"),u=this.elementPrototype.cloneNode(!1),y=document.createElement("a"),C=this.getItemProperty(o,r.urlProperty),m=this.getItemProperty(o,r.sourcesProperty),h=this.getItemProperty(o,r.titleProperty),g=this.getItemProperty(o,r.videoPosterProperty),P=[y];if(p.addClass(r.videoContentClass),e(y).addClass(r.videoPlayClass),e(u).addClass(r.videoCoverClass).hasClass(r.toggleClass)||P.push(u),u.draggable=!1,h&&(d.title=h,y.setAttribute("aria-label",h)),g&&(u.style.backgroundImage='url("'+g+'")'),c.setAttribute?r.videoPlaysInline&&c.setAttribute("playsinline",""):p.addClass(r.videoIframeClass),c.preload=this.getItemProperty(o,r.videoPreloadProperty)||"none",this.support.source&&m)for(l=0;l<m.length;l+=1)c.appendChild(e.extend(this.sourcePrototype.cloneNode(!1),m[l]));return C&&(c.src=C),y.href=C||m&&m.length&&m[0].src,c.play&&c.pause&&((i||e(c)).on("error",(function(){n.setTimeout(t,v)})).on("pause",(function(){c.seeking||(a=!1,p.removeClass(n.options.videoLoadingClass).removeClass(n.options.videoPlayingClass),s&&n.container.addClass(n.options.controlsClass),c.controls=!1,c===n.activeVideo&&delete n.activeVideo,n.interval&&n.play())})).on("playing",(function(){a=!1,u.removeAttribute("style"),p.removeClass(n.options.videoLoadingClass).addClass(n.options.videoPlayingClass)})).on("play",(function(){window.clearTimeout(n.timeout),a=!0,p.addClass(n.options.videoLoadingClass),n.container.hasClass(n.options.controlsClass)?(s=!0,n.container.removeClass(n.options.controlsClass)):s=!1,c.controls=!0,n.activeVideo=c})),e(P).on("click",(function(e){n.preventDefault(e),n.activeVideo=c,a?c.pause():c.play()})),d.appendChild(i&&i.element||c)),d.appendChild(u),d.appendChild(y),this.setTimeout(t,[{type:"load",target:d}]),d}}),o}));