import $ from"jquery";import env from"../core/env";export default class HelpDialog{constructor(t){this.context=t,this.ui=$.summernote.ui,this.$body=$(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo}initialize(){const t=this.options.dialogsInBody?this.$body:this.options.container,e=['<p class="text-center">','<a href="http://summernote.org/" target="_blank" rel="noopener noreferrer">Summernote @@VERSION@@</a> · ','<a href="https://github.com/summernote/summernote" target="_blank" rel="noopener noreferrer">Project</a> · ','<a href="https://github.com/summernote/summernote/issues" target="_blank" rel="noopener noreferrer">Issues</a>',"</p>"].join("");this.$dialog=this.ui.dialog({title:this.lang.options.help,fade:this.options.dialogsFade,body:this.createShortcutList(),footer:e,callback:t=>{t.find(".modal-body,.note-modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(t)}destroy(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()}createShortcutList(){const t=this.options.keyMap[env.isMac?"mac":"pc"];return Object.keys(t).map((e=>{const o=t[e],i=$('<div><div class="help-list-item"></div></div>');return i.append($("<label><kbd>"+e+"</kdb></label>").css({width:180,"margin-right":10})).append($("<span></span>").html(this.context.memo("help."+o)||o)),i.html()})).join("")}showHelpDialog(){return $.Deferred((t=>{this.ui.onDialogShown(this.$dialog,(()=>{this.context.triggerEvent("dialog.shown"),t.resolve()})),this.ui.showDialog(this.$dialog)})).promise()}show(){this.context.invoke("editor.saveRange"),this.showHelpDialog().then((()=>{this.context.invoke("editor.restoreRange")}))}}