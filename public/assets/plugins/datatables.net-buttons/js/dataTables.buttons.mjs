/*! For license information please see dataTables.buttons.mjs.LICENSE.txt */
import t from"jquery";import n from"datatables.net";let e=t;var o=0,i=0,s=n.ext.buttons,r=null;function a(t,n,o){e.fn.animate?t.stop().fadeIn(n,o):(t.css("display","block"),o&&o.call(t))}function l(t,n,o){e.fn.animate?t.stop().fadeOut(n,o):(t.css("display","none"),o&&o.call(t))}var c,u=function(t,i){if(!n.versionCheck("2"))throw"Warning: Buttons requires DataTables 2 or newer";if(!(this instanceof u))return function(n){return new u(n,t).container()};void 0===i&&(i={}),!0===i&&(i={}),Array.isArray(i)&&(i={buttons:i}),this.c=e.extend(!0,{},u.defaults,i),i.buttons&&(this.c.buttons=i.buttons),this.s={dt:new n.Api(t),buttons:[],listenKeys:"",namespace:"dtb"+o++},this.dom={container:e("<"+this.c.dom.container.tag+"/>").addClass(this.c.dom.container.className)},this._constructor()};e.extend(u.prototype,{action:function(t,n){var e=this._nodeToButton(t);return void 0===n?e.conf.action:(e.conf.action=n,this)},active:function(t,n){var o=this._nodeToButton(t),i=this.c.dom.button.active,s=e(o.node);return o.inCollection&&this.c.dom.collection.button&&void 0!==this.c.dom.collection.button.active&&(i=this.c.dom.collection.button.active),void 0===n?s.hasClass(i):(s.toggleClass(i,void 0===n||n),this)},add:function(t,n,e){var o=this.s.buttons;if("string"==typeof n){for(var i=n.split("-"),s=this.s,r=0,a=i.length-1;r<a;r++)s=s.buttons[1*i[r]];o=s.buttons,n=1*i[i.length-1]}return this._expandButton(o,t,void 0!==t?t.split:void 0,(void 0===t||void 0===t.split||0===t.split.length)&&void 0!==s,!1,n),void 0!==e&&!0!==e||this._draw(),this},collectionRebuild:function(t,n){var e=this._nodeToButton(t);if(void 0!==n){var o;for(o=e.buttons.length-1;o>=0;o--)this.remove(e.buttons[o].node);for(e.conf.prefixButtons&&n.unshift.apply(n,e.conf.prefixButtons),e.conf.postfixButtons&&n.push.apply(n,e.conf.postfixButtons),o=0;o<n.length;o++){var i=n[o];this._expandButton(e.buttons,i,void 0!==i&&void 0!==i.config&&void 0!==i.config.split,!0,void 0!==i.parentConf&&void 0!==i.parentConf.split,null,i.parentConf)}}this._draw(e.collection,e.buttons)},container:function(){return this.dom.container},disable:function(t){var n=this._nodeToButton(t);return e(n.node).addClass(this.c.dom.button.disabled).prop("disabled",!0),this},destroy:function(){e("body").off("keyup."+this.s.namespace);var t,n,o=this.s.buttons.slice();for(t=0,n=o.length;t<n;t++)this.remove(o[t].node);this.dom.container.remove();var i=this.s.dt.settings()[0];for(t=0,n=i.length;t<n;t++)if(i.inst===this){i.splice(t,1);break}return this},enable:function(t,n){if(!1===n)return this.disable(t);var o=this._nodeToButton(t);return e(o.node).removeClass(this.c.dom.button.disabled).prop("disabled",!1),this},index:function(t,n,e){n||(n="",e=this.s.buttons);for(var o=0,i=e.length;o<i;o++){var s=e[o].buttons;if(e[o].node===t)return n+o;if(s&&s.length){var r=this.index(t,o+"-",s);if(null!==r)return r}}return null},name:function(){return this.c.name},node:function(t){if(!t)return this.dom.container;var n=this._nodeToButton(t);return e(n.node)},processing:function(t,n){var o=this.s.dt,i=this._nodeToButton(t);return void 0===n?e(i.node).hasClass("processing"):(e(i.node).toggleClass("processing",n),e(o.table().node()).triggerHandler("buttons-processing.dt",[n,o.button(t),o,e(t),i.conf]),this)},remove:function(t){var n=this._nodeToButton(t),o=this._nodeToHost(t),i=this.s.dt;if(n.buttons.length)for(var s=n.buttons.length-1;s>=0;s--)this.remove(n.buttons[s].node);n.conf.destroying=!0,n.conf.destroy&&n.conf.destroy.call(i.button(t),i,e(t),n.conf),this._removeKey(n.conf),e(n.node).remove();var r=e.inArray(n,o);return o.splice(r,1),this},text:function(t,n){var o=this._nodeToButton(t),i=o.textNode,s=this.s.dt,r=e(o.node),a=function(t){return"function"==typeof t?t(s,r,o.conf):t};return void 0===n?a(o.conf.text):(o.conf.text=n,i.html(a(n)),this)},_constructor:function(){var t=this,n=this.s.dt,o=n.settings()[0],i=this.c.buttons;o._buttons||(o._buttons=[]),o._buttons.push({inst:this,name:this.c.name});for(var s=0,r=i.length;s<r;s++)this.add(i[s]);n.on("destroy",(function(n,e){e===o&&t.destroy()})),e("body").on("keyup."+this.s.namespace,(function(n){if(!document.activeElement||document.activeElement===document.body){var e=String.fromCharCode(n.keyCode).toLowerCase();-1!==t.s.listenKeys.toLowerCase().indexOf(e)&&t._keypress(e,n)}}))},_addKey:function(t){t.key&&(this.s.listenKeys+=e.isPlainObject(t.key)?t.key.key:t.key)},_draw:function(t,n){t||(t=this.dom.container,n=this.s.buttons),t.children().detach();for(var e=0,o=n.length;e<o;e++)t.append(n[e].inserter),t.append(" "),n[e].buttons&&n[e].buttons.length&&this._draw(n[e].collection,n[e].buttons)},_expandButton:function(t,n,o,i,s,r,a){var l=this.s.dt,c=!1,u=this.c.dom.collection,d=Array.isArray(n)?n:[n];void 0===n&&(d=Array.isArray(o)?o:[o]);for(var f=0,p=d.length;f<p;f++){var h=this._resolveExtends(d[f]);if(h)if(c=!(!h.config||!h.config.split),Array.isArray(h))this._expandButton(t,h,void 0!==b&&void 0!==b.conf?b.conf.split:void 0,i,void 0!==a&&void 0!==a.split,r,a);else{var b=this._buildButton(h,i,void 0!==h.split||void 0!==h.config&&void 0!==h.config.split,s);if(b){if(null!=r?(t.splice(r,0,b),r++):t.push(b),b.conf.buttons&&(b.collection=e("<"+u.container.content.tag+"/>"),b.conf._collection=b.collection,e(b.node).append(u.action.dropHtml),this._expandButton(b.buttons,b.conf.buttons,b.conf.split,!c,c,r,b.conf)),b.conf.split){b.collection=e("<"+u.container.tag+"/>"),b.conf._collection=b.collection;for(var g=0;g<b.conf.split.length;g++){var m=b.conf.split[g];"object"==typeof m&&(m.parent=a,void 0===m.collectionLayout&&(m.collectionLayout=b.conf.collectionLayout),void 0===m.dropup&&(m.dropup=b.conf.dropup),void 0===m.fade&&(m.fade=b.conf.fade))}this._expandButton(b.buttons,b.conf.buttons,b.conf.split,!c,c,r,b.conf)}b.conf.parent=a,h.init&&h.init.call(l.button(b.node),l,e(b.node),h)}}}},_buildButton:function(t,n,o,r){var a,l,c=this,u=this.c.dom,d=this.s.dt,f=function(n){return"function"==typeof n?n(d,l,t):n},p=e.extend(!0,{},u.button);if(n&&o&&u.collection.split?e.extend(!0,p,u.collection.split.action):r||n?e.extend(!0,p,u.collection.button):o&&e.extend(!0,p,u.split.button),t.spacer){var h=e("<"+p.spacer.tag+"/>").addClass("dt-button-spacer "+t.style+" "+p.spacer.className).html(f(t.text));return{conf:t,node:h,inserter:h,buttons:[],inCollection:n,isSplit:o,collection:null,textNode:h}}if(t.available&&!t.available(d,t)&&!t.html)return!1;if(t.html)l=e(t.html);else{var b=function(t,n,o,i,s){i.action.call(n.button(o),t,n,o,i,s),e(n.table().node()).triggerHandler("buttons-action.dt",[n.button(o),n,o,i])},g=function(t,n,e,o){o.async?(c.processing(e[0],!0),setTimeout((function(){b(t,n,e,o,(function(){c.processing(e[0],!1)}))}),o.async)):b(t,n,e,o,(function(){}))},m=t.tag||p.tag,v=void 0===t.clickBlurs||t.clickBlurs;if(l=e("<"+m+"/>").addClass(p.className).attr("tabindex",this.s.dt.settings()[0].iTabIndex).attr("aria-controls",this.s.dt.table().node().id).on("click.dtb",(function(n){n.preventDefault(),!l.hasClass(p.disabled)&&t.action&&g(n,d,l,t),v&&l.trigger("blur")})).on("keypress.dtb",(function(n){13===n.keyCode&&(n.preventDefault(),!l.hasClass(p.disabled)&&t.action&&g(n,d,l,t))})),"a"===m.toLowerCase()&&l.attr("href","#"),"button"===m.toLowerCase()&&l.attr("type","button"),p.liner.tag){var y=e("<"+p.liner.tag+"/>").html(f(t.text)).addClass(p.liner.className);"a"===p.liner.tag.toLowerCase()&&y.attr("href","#"),l.append(y),a=y}else l.html(f(t.text)),a=l;!1===t.enabled&&l.addClass(p.disabled),t.className&&l.addClass(t.className),t.titleAttr&&l.attr("title",f(t.titleAttr)),t.attr&&l.attr(t.attr),t.namespace||(t.namespace=".dt-button-"+i++),void 0!==t.config&&t.config.split&&(t.split=t.config.split)}var x,w,C=this.c.dom.buttonContainer;if(x=C&&C.tag?e("<"+C.tag+"/>").addClass(C.className).append(l):l,this._addKey(t),this.c.buttonCreated&&(x=this.c.buttonCreated(t,x)),o){var _=n?e.extend(!0,this.c.dom.split,this.c.dom.collection.split):this.c.dom.split,A=_.wrapper;w=e("<"+A.tag+"/>").addClass(A.className).append(l);var k=e.extend(t,{align:_.dropdown.align,attr:{"aria-haspopup":"dialog","aria-expanded":!1},className:_.dropdown.className,closeButton:!1,splitAlignClass:_.dropdown.splitAlignClass,text:_.dropdown.text});this._addKey(k);var B=function(t,n,o,i){s.split.action.call(n.button(w),t,n,o,i),e(n.table().node()).triggerHandler("buttons-action.dt",[n.button(o),n,o,i]),o.attr("aria-expanded",!0)},N=e('<button class="'+_.dropdown.className+' dt-button"></button>').html(_.dropdown.dropHtml).on("click.dtb",(function(t){t.preventDefault(),t.stopPropagation(),N.hasClass(p.disabled)||B(t,d,N,k),v&&N.trigger("blur")})).on("keypress.dtb",(function(t){13===t.keyCode&&(t.preventDefault(),N.hasClass(p.disabled)||B(t,d,N,k))}));0===t.split.length&&N.addClass("dtb-hide-drop"),w.append(N).attr(k.attr)}return{conf:t,node:o?w.get(0):l.get(0),inserter:o?w:x,buttons:[],inCollection:n,isSplit:o,inSplit:r,collection:null,textNode:a}},_nodeToButton:function(t,n){n||(n=this.s.buttons);for(var e=0,o=n.length;e<o;e++){if(n[e].node===t)return n[e];if(n[e].buttons.length){var i=this._nodeToButton(t,n[e].buttons);if(i)return i}}},_nodeToHost:function(t,n){n||(n=this.s.buttons);for(var e=0,o=n.length;e<o;e++){if(n[e].node===t)return n;if(n[e].buttons.length){var i=this._nodeToHost(t,n[e].buttons);if(i)return i}}},_keypress:function(t,n){if(!n._buttonsHandled){var o=function(o,i){if(o.key)if(o.key===t)n._buttonsHandled=!0,e(i).click();else if(e.isPlainObject(o.key)){if(o.key.key!==t)return;if(o.key.shiftKey&&!n.shiftKey)return;if(o.key.altKey&&!n.altKey)return;if(o.key.ctrlKey&&!n.ctrlKey)return;if(o.key.metaKey&&!n.metaKey)return;n._buttonsHandled=!0,e(i).click()}},i=function(t){for(var n=0,e=t.length;n<e;n++)o(t[n].conf,t[n].node),t[n].buttons.length&&i(t[n].buttons)};i(this.s.buttons)}},_removeKey:function(t){if(t.key){var n=e.isPlainObject(t.key)?t.key.key:t.key,o=this.s.listenKeys.split(""),i=e.inArray(n,o);o.splice(i,1),this.s.listenKeys=o.join("")}},_resolveExtends:function(t){var n,o,i=this,r=this.s.dt,a=function(n){for(var o=0;!e.isPlainObject(n)&&!Array.isArray(n);){if(void 0===n)return;if("function"==typeof n){if(!(n=n.call(i,r,t)))return!1}else if("string"==typeof n){if(!s[n])return{html:n};n=s[n]}if(++o>30)throw"Buttons: Too many iterations"}return Array.isArray(n)?n:e.extend({},n)};for(t=a(t);t&&t.extend;){if(!s[t.extend])throw"Cannot extend unknown button type: "+t.extend;var l=a(s[t.extend]);if(Array.isArray(l))return l;if(!l)return!1;var c=l.className;void 0!==t.config&&void 0!==l.config&&(t.config=e.extend({},l.config,t.config)),t=e.extend({},l,t),c&&t.className!==c&&(t.className=c+" "+t.className),t.extend=l.extend}var u=t.postfixButtons;if(u)for(t.buttons||(t.buttons=[]),n=0,o=u.length;n<o;n++)t.buttons.push(u[n]);var d=t.prefixButtons;if(d)for(t.buttons||(t.buttons=[]),n=0,o=d.length;n<o;n++)t.buttons.splice(n,0,d[n]);return t},_popover:function(t,n,o){var i=n,s=this.c,r=!1,c=e.extend({align:"button-left",autoClose:!1,background:!0,backgroundClassName:"dt-button-background",closeButton:!0,containerClassName:s.dom.collection.container.className,contentClassName:s.dom.collection.container.content.className,collectionLayout:"",collectionTitle:"",dropup:!1,fade:400,popoverTitle:"",rightAlignClassName:"dt-button-right",tag:s.dom.collection.container.tag},o),d=c.tag+"."+c.containerClassName.replace(/ /g,"."),f=n.node(),p=function(){r=!0,l(e(d),c.fade,(function(){e(this).detach()})),e(i.buttons('[aria-haspopup="dialog"][aria-expanded="true"]').nodes()).attr("aria-expanded","false"),e("div.dt-button-background").off("click.dtb-collection"),u.background(!1,c.backgroundClassName,c.fade,f),e(window).off("resize.resize.dtb-collection"),e("body").off(".dtb-collection"),i.off("buttons-action.b-internal"),i.off("destroy")};if(!1!==t){var h=e(i.buttons('[aria-haspopup="dialog"][aria-expanded="true"]').nodes());h.length&&(f.closest(d).length&&(f=h.eq(0)),p());var b=e(".dt-button",t).length,g="";3===b?g="dtb-b3":2===b?g="dtb-b2":1===b&&(g="dtb-b1");var m=e("<"+c.tag+"/>").addClass(c.containerClassName).addClass(c.collectionLayout).addClass(c.splitAlignClass).addClass(g).css("display","none").attr({"aria-modal":!0,role:"dialog"});t=e(t).addClass(c.contentClassName).attr("role","menu").appendTo(m),f.attr("aria-expanded","true"),f.parents("body")[0]!==document.body&&(f=document.body.lastChild),c.popoverTitle?m.prepend('<div class="dt-button-collection-title">'+c.popoverTitle+"</div>"):c.collectionTitle&&m.prepend('<div class="dt-button-collection-title">'+c.collectionTitle+"</div>"),c.closeButton&&m.prepend('<div class="dtb-popover-close">&times;</div>').addClass("dtb-collection-closeable"),a(m.insertAfter(f),c.fade);var v=e(n.table().container()),y=m.css("position");if("container"!==c.span&&"dt-container"!==c.align||(f=f.parent(),m.css("width",v.width())),"absolute"===y){var x=e(f[0].offsetParent),w=f.position(),C=f.offset(),_=x.offset(),A=x.position(),k=window.getComputedStyle(x[0]);_.height=x.outerHeight(),_.width=x.width()+parseFloat(k.paddingLeft),_.right=_.left+_.width,_.bottom=_.top+_.height;var B=w.top+f.outerHeight(),N=w.left;m.css({top:B,left:N}),k=window.getComputedStyle(m[0]);var T=m.offset();T.height=m.outerHeight(),T.width=m.outerWidth(),T.right=T.left+T.width,T.bottom=T.top+T.height,T.marginTop=parseFloat(k.marginTop),T.marginBottom=parseFloat(k.marginBottom),c.dropup&&(B=w.top-T.height-T.marginTop-T.marginBottom),("button-right"===c.align||m.hasClass(c.rightAlignClassName))&&(N=w.left-T.width+f.outerWidth()),"dt-container"!==c.align&&"container"!==c.align||N<w.left&&(N=-w.left),A.left+N+T.width>e(window).width()&&(N=e(window).width()-T.width-A.left),C.left+N<0&&(N=-C.left),A.top+B+T.height>e(window).height()+e(window).scrollTop()&&(B=w.top-T.height-T.marginTop-T.marginBottom),A.top+B<e(window).scrollTop()&&(B=w.top+f.outerHeight()),m.css({top:B,left:N})}else{var H=function(){var t=e(window).height()/2,n=m.height()/2;n>t&&(n=t),m.css("marginTop",-1*n)};H(),e(window).on("resize.dtb-collection",(function(){H()}))}c.background&&u.background(!0,c.backgroundClassName,c.fade,c.backgroundHost||f),e("div.dt-button-background").on("click.dtb-collection",(function(){})),c.autoClose&&setTimeout((function(){i.on("buttons-action.b-internal",(function(t,n,e,o){o[0]!==f[0]&&p()}))}),0),e(m).trigger("buttons-popover.dt"),i.on("destroy",p),setTimeout((function(){r=!1,e("body").on("click.dtb-collection",(function(n){if(!r){var o=e.fn.addBack?"addBack":"andSelf",i=e(n.target).parent()[0];(!e(n.target).parents()[o]().filter(t).length&&!e(i).hasClass("dt-buttons")||e(n.target).hasClass("dt-button-background"))&&p()}})).on("keyup.dtb-collection",(function(t){27===t.keyCode&&p()})).on("keydown.dtb-collection",(function(n){var o=e("a, button",t),i=document.activeElement;9===n.keyCode&&(-1===o.index(i)?(o.first().focus(),n.preventDefault()):n.shiftKey?i===o[0]&&(o.last().focus(),n.preventDefault()):i===o.last()[0]&&(o.first().focus(),n.preventDefault()))}))}),0)}else p()}}),u.background=function(t,n,o,i){void 0===o&&(o=400),i||(i=document.body),t?a(e("<div/>").addClass(n).css("display","none").insertAfter(i),o):l(e("div."+n),o,(function(){e(this).removeClass(n).remove()}))},u.instanceSelector=function(t,n){if(null==t)return e.map(n,(function(t){return t.inst}));var o=[],i=e.map(n,(function(t){return t.name})),s=function(t){if(Array.isArray(t))for(var r=0,a=t.length;r<a;r++)s(t[r]);else if("string"==typeof t)if(-1!==t.indexOf(","))s(t.split(","));else{var l=e.inArray(t.trim(),i);-1!==l&&o.push(n[l].inst)}else if("number"==typeof t)o.push(n[t].inst);else if("object"==typeof t&&t.nodeName)for(var c=0;c<n.length;c++)n[c].inst.dom.container[0]===t&&o.push(n[c].inst);else"object"==typeof t&&o.push(t)};return s(t),o},u.buttonSelector=function(t,n){for(var o=[],i=function(t,n,e){for(var o,s,r=0,a=n.length;r<a;r++)(o=n[r])&&(s=void 0!==e?e+r:r+"",t.push({node:o.node,name:o.conf.name,idx:s}),o.buttons&&i(t,o.buttons,s+"-"))},s=function(t,n){var r,a,l=[];i(l,n.s.buttons);var c=e.map(l,(function(t){return t.node}));if(Array.isArray(t)||t instanceof e)for(r=0,a=t.length;r<a;r++)s(t[r],n);else if(null==t||"*"===t)for(r=0,a=l.length;r<a;r++)o.push({inst:n,node:l[r].node});else if("number"==typeof t)n.s.buttons[t]&&o.push({inst:n,node:n.s.buttons[t].node});else if("string"==typeof t)if(-1!==t.indexOf(",")){var u=t.split(",");for(r=0,a=u.length;r<a;r++)s(u[r].trim(),n)}else if(t.match(/^\d+(\-\d+)*$/)){var d=e.map(l,(function(t){return t.idx}));o.push({inst:n,node:l[e.inArray(t,d)].node})}else if(-1!==t.indexOf(":name")){var f=t.replace(":name","");for(r=0,a=l.length;r<a;r++)l[r].name===f&&o.push({inst:n,node:l[r].node})}else e(c).filter(t).each((function(){o.push({inst:n,node:this})}));else if("object"==typeof t&&t.nodeName){var p=e.inArray(t,c);-1!==p&&o.push({inst:n,node:c[p]})}},r=0,a=t.length;r<a;r++){var l=t[r];s(n,l)}return o},u.stripData=function(t,e){return"string"!=typeof t||(t=u.stripHtmlScript(t),t=u.stripHtmlComments(t),e&&!e.stripHtml||(t=n.util.stripHtml(t)),e&&!e.trim||(t=t.trim()),e&&!e.stripNewlines||(t=t.replace(/\n/g," ")),e&&!e.decodeEntities||(r?t=r(t):(b.innerHTML=t,t=b.value))),t},u.entityDecoder=function(t){r=t},u.stripHtmlComments=function(t){var n;do{n=t,t=t.replace(/(<!--.*?--!?>)|(<!--[\S\s]+?--!?>)|(<!--[\S\s]*?$)/g,"")}while(t!==n);return t},u.stripHtmlScript=function(t){var n;do{n=t,t=t.replace(/<script\b[^<]*(?:(?!<\/script[^>]*>)<[^<]*)*<\/script[^>]*>/gi,"")}while(t!==n);return t},u.defaults={buttons:["copy","excel","csv","pdf","print"],name:"main",tabIndex:0,dom:{container:{tag:"div",className:"dt-buttons"},collection:{action:{dropHtml:'<span class="dt-button-down-arrow">&#x25BC;</span>'},container:{className:"dt-button-collection",content:{className:"",tag:"div"},tag:"div"}},button:{tag:"button",className:"dt-button",active:"dt-button-active",disabled:"disabled",spacer:{className:"dt-button-spacer",tag:"span"},liner:{tag:"span",className:""}},split:{action:{className:"dt-button-split-drop-button dt-button",tag:"button"},dropdown:{align:"split-right",className:"dt-button-split-drop",dropHtml:'<span class="dt-button-down-arrow">&#x25BC;</span>',splitAlignClass:"dt-button-split-left",tag:"button"},wrapper:{className:"dt-button-split",tag:"div"}}}},u.version="3.0.2",e.extend(s,{collection:{text:function(t){return t.i18n("buttons.collection","Collection")},className:"buttons-collection",closeButton:!1,init:function(t,n){n.attr("aria-expanded",!1)},action:function(t,n,o,i){i._collection.parents("body").length?this.popover(!1,i):this.popover(i._collection,i),"keypress"===t.type&&e("a, button",i._collection).eq(0).focus()},attr:{"aria-haspopup":"dialog"}},split:{text:function(t){return t.i18n("buttons.split","Split")},className:"buttons-split",closeButton:!1,init:function(t,n){return n.attr("aria-expanded",!1)},action:function(t,n,e,o){this.popover(o._collection,o)},attr:{"aria-haspopup":"dialog"}},copy:function(){if(s.copyHtml5)return"copyHtml5"},csv:function(t,n){if(s.csvHtml5&&s.csvHtml5.available(t,n))return"csvHtml5"},excel:function(t,n){if(s.excelHtml5&&s.excelHtml5.available(t,n))return"excelHtml5"},pdf:function(t,n){if(s.pdfHtml5&&s.pdfHtml5.available(t,n))return"pdfHtml5"},pageLength:function(t){var n=t.settings()[0].aLengthMenu,o=[],i=[];if(Array.isArray(n[0]))o=n[0],i=n[1];else for(var s=0;s<n.length;s++){var r=n[s];e.isPlainObject(r)?(o.push(r.value),i.push(r.label)):(o.push(r),i.push(r))}return{extend:"collection",text:function(t){return t.i18n("buttons.pageLength",{"-1":"Show all rows",_:"Show %d rows"},t.page.len())},className:"buttons-page-length",autoClose:!0,buttons:e.map(o,(function(t,n){return{text:i[n],className:"button-page-length",action:function(n,e){e.page.len(t).draw()},init:function(n,e,o){var i=this,s=function(){i.active(n.page.len()===t)};n.on("length.dt"+o.namespace,s),s()},destroy:function(t,n,e){t.off("length.dt"+e.namespace)}}})),init:function(t,n,e){var o=this;t.on("length.dt"+e.namespace,(function(){o.text(e.text)}))},destroy:function(t,n,e){t.off("length.dt"+e.namespace)}}},spacer:{style:"empty",spacer:!0,text:function(t){return t.i18n("buttons.spacer","")}}}),n.Api.register("buttons()",(function(t,n){void 0===n&&(n=t,t=void 0),this.selector.buttonGroup=t;var e=this.iterator(!0,"table",(function(e){if(e._buttons)return u.buttonSelector(u.instanceSelector(t,e._buttons),n)}),!0);return e._groupSelector=t,e})),n.Api.register("button()",(function(t,n){var e=this.buttons(t,n);return e.length>1&&e.splice(1,e.length),e})),n.Api.registerPlural("buttons().active()","button().active()",(function(t){return void 0===t?this.map((function(t){return t.inst.active(t.node)})):this.each((function(n){n.inst.active(n.node,t)}))})),n.Api.registerPlural("buttons().action()","button().action()",(function(t){return void 0===t?this.map((function(t){return t.inst.action(t.node)})):this.each((function(n){n.inst.action(n.node,t)}))})),n.Api.registerPlural("buttons().collectionRebuild()","button().collectionRebuild()",(function(t){return this.each((function(n){for(var e=0;e<t.length;e++)"object"==typeof t[e]&&(t[e].parentConf=n);n.inst.collectionRebuild(n.node,t)}))})),n.Api.register(["buttons().enable()","button().enable()"],(function(t){return this.each((function(n){n.inst.enable(n.node,t)}))})),n.Api.register(["buttons().disable()","button().disable()"],(function(){return this.each((function(t){t.inst.disable(t.node)}))})),n.Api.register("button().index()",(function(){var t=null;return this.each((function(n){var e=n.inst.index(n.node);null!==e&&(t=e)})),t})),n.Api.registerPlural("buttons().nodes()","button().node()",(function(){var t=e();return e(this.each((function(n){t=t.add(n.inst.node(n.node))}))),t})),n.Api.registerPlural("buttons().processing()","button().processing()",(function(t){return void 0===t?this.map((function(t){return t.inst.processing(t.node)})):this.each((function(n){n.inst.processing(n.node,t)}))})),n.Api.registerPlural("buttons().text()","button().text()",(function(t){return void 0===t?this.map((function(t){return t.inst.text(t.node)})):this.each((function(n){n.inst.text(n.node,t)}))})),n.Api.registerPlural("buttons().trigger()","button().trigger()",(function(){return this.each((function(t){t.inst.node(t.node).trigger("click")}))})),n.Api.register("button().popover()",(function(t,n){return this.map((function(e){return e.inst._popover(t,this.button(this[0].node),n)}))})),n.Api.register("buttons().containers()",(function(){var t=e(),n=this._groupSelector;return this.iterator(!0,"table",(function(e){if(e._buttons)for(var o=u.instanceSelector(n,e._buttons),i=0,s=o.length;i<s;i++)t=t.add(o[i].container())})),t})),n.Api.register("buttons().container()",(function(){return this.containers().eq(0)})),n.Api.register("button().add()",(function(t,n,e){var o=this.context;if(o.length){var i=u.instanceSelector(this._groupSelector,o[0]._buttons);i.length&&i[0].add(n,t,e)}return this.button(this._groupSelector,t)})),n.Api.register("buttons().destroy()",(function(){return this.pluck("inst").unique().each((function(t){t.destroy()})),this})),n.Api.registerPlural("buttons().remove()","buttons().remove()",(function(){return this.each((function(t){t.inst.remove(t.node)})),this})),n.Api.register("buttons.info()",(function(t,n,o){var i=this;return!1===t?(this.off("destroy.btn-info"),l(e("#datatables_buttons_info"),400,(function(){e(this).remove()})),clearTimeout(c),c=null,this):(c&&clearTimeout(c),e("#datatables_buttons_info").length&&e("#datatables_buttons_info").remove(),t=t?"<h2>"+t+"</h2>":"",a(e('<div id="datatables_buttons_info" class="dt-button-info"/>').html(t).append(e("<div/>")["string"==typeof n?"html":"append"](n)).css("display","none").appendTo("body")),void 0!==o&&0!==o&&(c=setTimeout((function(){i.buttons.info(!1)}),o)),this.on("destroy.btn-info",(function(){i.buttons.info(!1)})),this)})),n.Api.register("buttons.exportData()",(function(t){if(this.context.length)return g(new n.Api(this.context[0]),t)})),n.Api.register("buttons.exportInfo()",(function(t){return t||(t={}),{filename:d(t,this),title:p(t,this),messageTop:h(this,t,t.message||t.messageTop,"top"),messageBottom:h(this,t,t.messageBottom,"bottom")}}));var d=function(t,n){var o="*"===t.filename&&"*"!==t.title&&void 0!==t.title&&null!==t.title&&""!==t.title?t.title:t.filename;if("function"==typeof o&&(o=o(t,n)),null==o)return null;-1!==o.indexOf("*")&&(o=o.replace(/\*/g,e("head > title").text()).trim()),o=o.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,"");var i=f(t.extension,t,n);return i||(i=""),o+i},f=function(t,n,e){return null==t?null:"function"==typeof t?t(n,e):t},p=function(t,n){var o=f(t.title,t,n);return null===o?null:-1!==o.indexOf("*")?o.replace(/\*/g,e("head > title").text()||"Exported data"):o},h=function(t,n,o,i){var s=f(o,n,t);if(null===s)return null;var r=e("caption",t.table().container()).eq(0);return"*"===s?r.css("caption-side")!==i?null:r.length?r.text():"":s},b=e("<textarea/>")[0],g=function(t,n){var o=e.extend(!0,{},{rows:null,columns:"",modifier:{search:"applied",order:"applied"},orthogonal:"display",stripHtml:!0,stripNewlines:!0,decodeEntities:!0,trim:!0,format:{header:function(t){return u.stripData(t,o)},footer:function(t){return u.stripData(t,o)},body:function(t){return u.stripData(t,o)}},customizeData:null,customizeZip:null},n),i=t.columns(o.columns).indexes().map((function(n){var e=t.column(n);return o.format.header(e.title(),n,e.header())})).toArray(),s=t.table().footer()?t.columns(o.columns).indexes().map((function(n){var i=t.column(n).footer(),s="";if(i){var r=e(".dt-column-title",i);s=r.length?r.html():e(i).html()}return o.format.footer(s,n,i)})).toArray():null,r=e.extend({},o.modifier);t.select&&"function"==typeof t.select.info&&void 0===r.selected&&t.rows(o.rows,e.extend({selected:!0},r)).any()&&e.extend(r,{selected:!0});for(var a=t.rows(o.rows,r).indexes().toArray(),l=t.cells(a,o.columns,{order:r.order}),c=l.render(o.orthogonal).toArray(),d=l.nodes().toArray(),f=l.indexes().toArray(),p=t.columns(o.columns).count(),h=[],b=0,g=0,v=p>0?c.length/p:0;g<v;g++){for(var y=[p],x=0;x<p;x++)y[x]=o.format.body(c[b],f[b].row,f[b].column,d[b]),b++;h[g]=y}var w={header:i,headerStructure:m(o.format.header,t.table().header.structure(o.columns)),footer:s,footerStructure:m(o.format.footer,t.table().footer.structure(o.columns)),body:h};return o.customizeData&&o.customizeData(w),w};function m(t,n){for(var e=0;e<n.length;e++)for(var o=0;o<n[e].length;o++){var i=n[e][o];i&&(i.title=t(i.title,o,i.cell))}return n}function v(t,e){var o=new n.Api(t),i=e||(o.init().buttons||n.defaults.buttons);return new u(o,i).container()}e.fn.dataTable.Buttons=u,e.fn.DataTable.Buttons=u,e(document).on("init.dt plugin-init.dt",(function(t,e){if("dt"===t.namespace){var o=e.oInit.buttons||n.defaults.buttons;o&&!e._buttons&&new u(e,o).container()}})),n.ext.feature.push({fnInit:v,cFeature:"B"}),n.feature&&n.feature.register("buttons",v);export default n;