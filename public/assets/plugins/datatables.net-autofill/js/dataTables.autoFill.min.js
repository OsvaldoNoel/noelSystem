/*! For license information please see dataTables.autoFill.min.js.LICENSE.txt */
!function(t){var e,o;"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function(e){return t(e,window,document)})):"object"==typeof exports?(e=require("jquery"),o=function(t,e){e.fn.dataTable||require("datatables.net")(t,e)},"undefined"==typeof window?module.exports=function(i,n){return i=i||window,n=n||e(i),o(i,n),t(n,i,i.document)}:(o(window,e),module.exports=t(e,window,window.document))):t(jQuery,window,document)}((function(t,e,o){"use strict";function i(e,o){if(!n.versionCheck||!n.versionCheck("1.11"))throw"Warning: AutoFill requires DataTables 1.11 or greater";this.c=t.extend(!0,{},n.defaults.autoFill,i.defaults,o),this.s={dt:new n.Api(e),namespace:".autoFill"+l++,scroll:{},scrollInterval:null,handle:{height:0,width:0},enabled:!1},this.dom={closeButton:t('<div class="dtaf-popover-close">&times;</div>'),handle:t('<div class="dt-autofill-handle"/>'),select:{top:t('<div class="dt-autofill-select top"/>'),right:t('<div class="dt-autofill-select right"/>'),bottom:t('<div class="dt-autofill-select bottom"/>'),left:t('<div class="dt-autofill-select left"/>')},background:t('<div class="dt-autofill-background"/>'),list:t('<div class="dt-autofill-list">'+this.s.dt.i18n("autoFill.info","")+"</div>").attr("aria-modal",!0).attr("role","dialog").append('<div class="dt-autofill-list-items"></div>'),dtScroll:null,offsetParent:null},this._constructor()}var n=t.fn.dataTable,l=0,s=(t.extend(i.prototype,{enabled:function(){return this.s.enabled},enable:function(o){var i=this;if(!1===o)return this.disable();function n(){i.s.handle={height:!1,width:!1},t(i.dom.handle).css({height:"",width:""}),void 0!==i.dom.attachedTo&&i._attach(i.dom.attachedTo)}return this.s.enabled=!0,this._focusListener(),this.dom.handle.on("mousedown touchstart",(function(t){return i._mousedown(t),!1})),t(e).on("resize",(function(){0<t("div.dt-autofill-handle").length&&void 0!==i.dom.attachedTo&&i._attach(i.dom.attachedTo)})),t(e).on("orientationchange",(function(){setTimeout((function(){n(),setTimeout(n,150)}),50)})),this},disable:function(){return this.s.enabled=!1,this._focusListenerRemove(),this},_constructor:function(){var e=this,o=this.s.dt,i=t("div.dataTables_scrollBody",this.s.dt.table().container());o.settings()[0].autoFill=this,i.length&&"static"===(this.dom.dtScroll=i).css("position")&&i.css("position","relative"),!1!==this.c.enable&&this.enable(),o.on("destroy.autoFill",(function(){e._focusListenerRemove()}))},_attach:function(e){var o=this.s.dt,i=o.cell(e).index(),n=this.dom.handle,l=this.s.handle;i&&-1!==o.columns(this.c.columns).indexes().indexOf(i.column)?(this.dom.offsetParent||(this.dom.offsetParent=t(o.table().node()).offsetParent()),l.height&&l.width||(n.appendTo("body"),l.height=n.outerHeight(),l.width=n.outerWidth()),i=this._getPosition(e,this.dom.offsetParent),this.dom.attachedTo=e,n.css({top:i.top+e.offsetHeight-l.height,left:i.left+e.offsetWidth-l.width}).appendTo(this.dom.offsetParent)):this._detach()},_actionSelector:function(e){var o,n,l=this,s=this.s.dt,a=i.actions,d=[];t.each(a,(function(t,o){o.available(s,e)&&d.push(t)})),1===d.length&&!1===this.c.alwaysAsk?(o=a[d[0]].execute(s,e),this._update(o,e)):(1<d.length||this.c.alwaysAsk)&&(n=this.dom.list.children("div.dt-autofill-list-items").empty(),d.push("cancel"),t.each(d,(function(o,i){n.append(t("<button/>").html(a[i].option(s,e)).append(t('<span class="dt-autofill-button"/>').html(s.i18n("autoFill.button","&gt;"))).on("click",(function(o){"button"===o.target.nodeName.toLowerCase()&&(o=a[i].execute(s,e,t(this).closest("button")),l._update(o,e),l.dom.background.remove(),l.dom.list.remove())})))})),this.dom.background.appendTo("body"),this.dom.background.one("click",(function(){l.dom.background.remove(),l.dom.list.remove()})),this.dom.list.appendTo("body"),this.c.closeButton&&(this.dom.list.prepend(this.dom.closeButton).addClass(i.classes.closeable),this.dom.closeButton.on("click",(function(){return l.dom.background.click()}))),this.dom.list.css("margin-top",this.dom.list.outerHeight()/2*-1))},_detach:function(){this.dom.attachedTo=null,this.dom.handle.detach()},_drawSelection:function(e,o){var i,n=this.s.dt,l=this.s.start,s=t(this.dom.start),a=(e={row:this.c.vertical?n.rows({page:"current"}).nodes().indexOf(e.parentNode):l.row,column:this.c.horizontal?t(e).index():l.column},n.column.index("toData",e.column)),d=n.row(":eq("+e.row+")",{page:"current"});d=t(n.cell(d.index(),a).node());n.cell(d).any()&&-1!==n.columns(this.c.columns).indexes().indexOf(a)&&-1!==e.row&&(this.s.end=e,n=l.row<e.row?s:d,a=l.row<e.row?d:s,i=l.column<e.column?s:d,l=l.column<e.column?d:s,n=this._getPosition(n.get(0)).top,i=this._getPosition(i.get(0)).left,e=this._getPosition(a.get(0)).top+a.outerHeight()-n,d=this._getPosition(l.get(0)).left+l.outerWidth()-i,(s=this.dom.select).top.css({top:n,left:i,width:d}),s.left.css({top:n,left:i,height:e}),s.bottom.css({top:n+e,left:i,width:d}),s.right.css({top:n,left:i+d,height:e}))},_editor:function(t){var e=this.s.dt,o=this.c.editor;if(o){for(var i={},n=[],l=o.fields(),s=0,a=t.length;s<a;s++)for(var d=0,r=t[s].length;d<r;d++){var c=t[s][d],u=e.settings()[0].aoColumns[c.index.column],h=u.editField;if(void 0===h)for(var f=u.mData,m=0,p=l.length;m<p;m++){var v=o.field(l[m]);if(v.dataSrc()===f){h=v.name();break}}if(!h)throw"Could not automatically determine field data. Please see https://datatables.net/tn/11";i[h]||(i[h]={}),u=e.row(c.index.row).id(),i[h][u]=c.set,n.push(c.index)}o.bubble(n,!1).multiSet(i).submit(null,(function(){o.close()}))}},_emitEvent:function(e,o){this.s.dt.iterator("table",(function(i,n){t(i.nTable).triggerHandler(e+".dt",o)}))},_focusListener:function(){var e=this,i=this.s.dt,n=this.s.namespace,l=null!==this.c.focus?this.c.focus:i.init().keys||i.settings()[0].keytable?"focus":"hover";"focus"===l?i.on("key-focus.autoFill",(function(t,o,i){e._attach(i.node())})).on("key-blur.autoFill",(function(t,o,i){e._detach()})):"click"===l?(t(i.table().body()).on("click"+n,"td, th",(function(t){e._attach(this)})),t(o.body).on("click"+n,(function(o){t(o.target).parents().filter(i.table().body()).length||e._detach()}))):t(i.table().body()).on("mouseenter"+n+" touchstart"+n,"td, th",(function(t){e._attach(this)})).on("mouseleave"+n+"touchend"+n,(function(o){t(o.relatedTarget).hasClass("dt-autofill-handle")||e._detach()}))},_focusListenerRemove:function(){var e=this.s.dt;e.off(".autoFill"),t(e.table().body()).off(this.s.namespace),t(o.body).off(this.s.namespace)},_getPosition:function(e,o){var i=e,n=0,l=0;o=o||t(t(this.s.dt.table().node())[0].offsetParent);do{var s=i.offsetTop,a=i.offsetLeft,d=t(i.offsetParent)}while(n+=s+ +parseInt(d.css("border-top-width")||0),l+=a+ +parseInt(d.css("border-left-width")||0),"body"!==i.nodeName.toLowerCase()&&(i=d.get(0),d.get(0)!==o.get(0)));return{top:n,left:l}},_mousedown:function(i){var n=this,l=this.s.dt,s=(this.dom.start=this.dom.attachedTo,this.s.start={row:l.rows({page:"current"}).nodes().indexOf(t(this.dom.start).parent()[0]),column:t(this.dom.start).index()},t(o.body).on("mousemove.autoFill touchmove.autoFill",(function(e){n._mousemove(e),"touchmove"===e.type&&t(o.body).one("touchend.autoFill",(function(){n._detach()}))})).on("mouseup.autoFill touchend.autoFill",(function(t){n._mouseup(t)})),this.dom.select);l=t(l.table().node()).offsetParent(),s.top.appendTo(l),s.left.appendTo(l),s.right.appendTo(l),s.bottom.appendTo(l),this._drawSelection(this.dom.start,i),this.dom.handle.css("display","none"),s=this.dom.dtScroll;this.s.scroll={windowHeight:t(e).height(),windowWidth:t(e).width(),dtTop:s?s.offset().top:null,dtLeft:s?s.offset().left:null,dtHeight:s?s.outerHeight():null,dtWidth:s?s.outerWidth():null}},_mousemove:function(t){var e=t.touches&&t.touches.length?o.elementFromPoint(t.touches[0].clientX,t.touches[0].clientY):t.target,i=e.nodeName.toLowerCase();"td"!==i&&"th"!==i||(this._drawSelection(e,t),this._shiftScroll(t))},_mouseup:function(e){t(o.body).off(".autoFill");var i=this,l=this.s.dt,s=((s=this.dom.select).top.remove(),s.left.remove(),s.right.remove(),s.bottom.remove(),this.dom.handle.css("display","block"),this.s.start),a=this.s.end;if(s.row!==a.row||s.column!==a.column){var d,r=l.cell(":eq("+s.row+")",s.column+":visible",{page:"current"});if(t("div.DTE",r.node()).length)(d=l.editor()).on("submitSuccess.dtaf close.dtaf",(function(){d.off(".dtaf"),setTimeout((function(){i._mouseup(e)}),100)})).on("submitComplete.dtaf preSubmitCancelled.dtaf close.dtaf",(function(){d.off(".dtaf")})),d.submit();else{for(var c=this._range(s.row,a.row),u=this._range(s.column,a.column),h=[],f=l.settings()[0].aoColumns,m=l.columns(this.c.columns).indexes(),p=0;p<c.length;p++)h.push(t.map(u,(function(t){var e=l.row(":eq("+c[p]+")",{page:"current"}),o=(t=(e=l.cell(e.index(),t+":visible")).data(),e.index()),i=f[o.column].editField;if(void 0!==i&&(t=n.util.get(i)(l.row(o.row).data())),-1!==m.indexOf(o.column))return{cell:e,data:t,label:e.data(),index:o}})));this._actionSelector(h),clearInterval(this.s.scrollInterval),this.s.scrollInterval=null}}},_range:function(t,e){var o,i=[];if(t<=e)for(o=t;o<=e;o++)i.push(o);else for(o=t;e<=o;o--)i.push(o);return i},_shiftScroll:function(t){var o,i,n,l,s=this,a=this.s.scroll,d=!1,r=t.type.includes("touch")?t.touches[0].clientX:t.pageX-e.scrollX;(t=t.type.includes("touch")?t.touches[0].clientY:t.pageY-e.scrollY)<65?o=-5:t>a.windowHeight-65&&(o=5),r<65?i=-5:r>a.windowWidth-65&&(i=5),null!==a.dtTop&&t<a.dtTop+65?n=-5:null!==a.dtTop&&t>a.dtTop+a.dtHeight-65&&(n=5),null!==a.dtLeft&&r<a.dtLeft+65?l=-5:null!==a.dtLeft&&r>a.dtLeft+a.dtWidth-65&&(l=5),o||i||n||l?(a.windowVert=o,a.windowHoriz=i,a.dtVert=n,a.dtHoriz=l,d=!0):this.s.scrollInterval&&(clearInterval(this.s.scrollInterval),this.s.scrollInterval=null),!this.s.scrollInterval&&d&&(this.s.scrollInterval=setInterval((function(){var t;e.scrollTo(e.scrollX+(a.windowHoriz||0),e.scrollY+(a.windowVert||0)),(a.dtVert||a.dtHoriz)&&(t=s.dom.dtScroll[0],a.dtVert&&(t.scrollTop+=a.dtVert),a.dtHoriz)&&(t.scrollLeft+=a.dtHoriz)}),20))},_update:function(t,e){if(!1!==t){var o,i=(t=this.s.dt).columns(this.c.columns).indexes();if(this._emitEvent("preAutoFill",[t,e]),this._editor(e),null!==this.c.update?this.c.update:!this.c.editor){for(var n=0,l=e.length;n<l;n++)for(var s=0,a=e[n].length;s<a;s++)o=e[n][s],-1!==i.indexOf(o.index.column)&&o.cell.data(o.set);t.draw(!1)}this._emitEvent("autoFill",[t,e])}}}),i.actions={increment:{available:function(t,e){return e=e[0][0].label,!isNaN(e-parseFloat(e))},option:function(t,e){return t.i18n("autoFill.increment",'Increment / decrement each cell by: <input type="number" value="1">')},execute:function(e,o,i){for(var n=+o[0][0].data,l=+t("input",i).val(),s=0,a=o.length;s<a;s++)for(var d=0,r=o[s].length;d<r;d++)o[s][d].set=n,n+=l}},fill:{available:function(t,e){return!0},option:function(t,e){return t.i18n("autoFill.fill","Fill all cells with <i>%d</i>",e[0][0].label)},execute:function(t,e,o){for(var i=e[0][0].data,n=0,l=e.length;n<l;n++)for(var s=0,a=e[n].length;s<a;s++)e[n][s].set=i}},fillHorizontal:{available:function(t,e){return 1<e.length&&1<e[0].length},option:function(t,e){return t.i18n("autoFill.fillHorizontal","Fill cells horizontally")},execute:function(t,e,o){for(var i=0,n=e.length;i<n;i++)for(var l=0,s=e[i].length;l<s;l++)e[i][l].set=e[i][0].data}},fillVertical:{available:function(t,e){return 1<e.length&&1<e[0].length},option:function(t,e){return t.i18n("autoFill.fillVertical","Fill cells vertically")},execute:function(t,e,o){for(var i=0,n=e.length;i<n;i++)for(var l=0,s=e[i].length;l<s;l++)e[i][l].set=e[0][l].data}},cancel:{available:function(){return!1},option:function(t){return t.i18n("autoFill.cancel","Cancel")},execute:function(){return!1}}},i.version="2.7.0",i.defaults={alwaysAsk:!1,closeButton:!0,focus:null,columns:"",enable:!0,update:null,editor:null,vertical:!0,horizontal:!0},i.classes={btn:"btn",closeable:"dtaf-popover-closeable"},t.fn.dataTable.Api);return s.register("autoFill()",(function(){return this})),s.register("autoFill().enabled()",(function(){var t=this.context[0];return!!t.autoFill&&t.autoFill.enabled()})),s.register("autoFill().enable()",(function(t){return this.iterator("table",(function(e){e.autoFill&&e.autoFill.enable(t)}))})),s.register("autoFill().disable()",(function(){return this.iterator("table",(function(t){t.autoFill&&t.autoFill.disable()}))})),t(o).on("preInit.dt.autofill",(function(e,o,l){var s,a;"dt"===e.namespace&&(e=o.oInit.autoFill,s=n.defaults.autoFill,e||s)&&(a=t.extend({},e,s),!1!==e)&&new i(o,a)})),n.AutoFill=i,t.fn.DataTable.AutoFill=i,n}));