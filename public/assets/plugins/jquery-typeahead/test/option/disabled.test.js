const $=require("jquery"),Typeahead=require("../../src/jquery.typeahead");let source={country:{data:[{name:"Canada",population:366e5},{name:"United-States",population:3013e5},{name:"India",population:12e8}]}},arrowDownEvent=$.Event("keydown");arrowDownEvent.keyCode=40;let arrowRightEvent=$.Event("keydown");arrowRightEvent.keyCode=39;let tabEvent=$.Event("keydown");tabEvent.keyCode=9,describe("Typeahead disabled option Tests - single disabled item in the data",(()=>{let e,t,a;beforeAll((()=>{document.body.innerHTML='<input class="js-typeahead">',source.country.data[0].disabled=!0,e=$.typeahead({input:".js-typeahead",minLength:0,hint:!0,blurOnTab:!1,display:["name"],source,callback:{onLeave:function(e,a,n,o){t=n},onEnter:function(e,t,n,o){a=n}}})})),it("Should not be able to select a disabled item",(()=>{e.node.val("Ca").trigger("input"),expect(e.hintIndex).toEqual(null),e.node.focus(),$(".js-typeahead").trigger(arrowDownEvent),expect(e.node.val()).toEqual("Ca"),$(".js-typeahead").trigger(tabEvent),expect(e.node.val()).toEqual("Ca"),$(".js-typeahead").trigger(arrowRightEvent),expect(e.node.val()).toEqual("Ca")})),it("Should trigger the onLeave / onEnter with the right item",(()=>{e.node.val("").trigger("input"),e.node.focus(),$(".js-typeahead").trigger(arrowDownEvent),expect(t).toEqual(void 0),expect(a.name).toEqual("United-States"),$(".js-typeahead").trigger(tabEvent),expect(t.name).toEqual("United-States"),expect(a.name).toEqual("India"),$(".js-typeahead").trigger(arrowDownEvent),expect(t.name).toEqual("India"),expect(a).toEqual(void 0)})),afterAll((()=>{source.country.data[0].disabled=!1}))})),describe("Typeahead disabled option Tests - multiple disabled items in the matcher function",(()=>{let e,t,a;beforeAll((()=>{document.body.innerHTML='<input class="js-typeahead">',e=$.typeahead({input:".js-typeahead",minLength:0,hint:!0,blurOnTab:!1,display:["name"],matcher:function(e,t){return!(e.name.length>=6)||(e.disabled=!0,e)},source,callback:{onLeave:function(e,a,n,o){t=n},onEnter:function(e,t,n,o){a=n}}})})),it("Should not be able to select a disabled item",(()=>{e.node.val("Ca").trigger("input"),expect(e.hintIndex).toEqual(null),e.node.focus(),$(".js-typeahead").trigger(arrowDownEvent),expect(e.node.val()).toEqual("Ca"),$(".js-typeahead").trigger(tabEvent),expect(e.node.val()).toEqual("Ca")})),it("Should trigger the onLeave / onEnter with the right item",(()=>{e.node.val("").trigger("input"),e.node.focus(),$(".js-typeahead").trigger(tabEvent),expect(t).toEqual(void 0),expect(a.name).toEqual("India"),$(".js-typeahead").trigger(arrowDownEvent),expect(t.name).toEqual("India"),expect(a).toEqual(void 0),$(".js-typeahead").trigger(arrowDownEvent),expect(t).toEqual(void 0),expect(a.name).toEqual("India"),$(".js-typeahead").trigger(arrowRightEvent),expect(e.node.val()).toEqual("India")}))}));