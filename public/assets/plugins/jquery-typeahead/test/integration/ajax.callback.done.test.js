const $=require("jquery"),Typeahead=require("../../src/jquery.typeahead");describe("Typeahead $.ajax.callback.done Tests",(()=>{let e;beforeAll((()=>{document.body.innerHTML='<input class="js-typeahead">',e=$.typeahead({input:".js-typeahead",minLength:0,order:"asc",group:!0,blurOnTab:!1,maxItemPerGroup:3,hint:!0,dynamic:!0,source:{group1:{ajax:{type:"GET",url:"http://test.com/groups.json",data:{term:"{{query}}"},callback:{done:function(e){return e.group1}}}},group2:{ajax:{type:"GET",url:"http://test.com/groups.json",data:{term:"{{query}}"},callback:{done:function(e){return e.group2.shift(),e.group2}}}}}})})),it("Should display the modified data 2 different groups",(t=>{e.node.triggerHandler("input").done((function(){var r,a=!1,u=[];for(let t=0,n=e.result.length;t<n;++t){if(r=JSON.stringify(e.result[t]),~u.indexOf(r)){a=!0;break}u.push(r)}expect(e.result.length).toEqual(5),expect(a).toBeFalsy(),t()}))}))}));