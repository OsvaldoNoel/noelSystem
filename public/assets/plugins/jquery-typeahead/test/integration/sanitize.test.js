const $=require("jquery"),Typeahead=require("../../src/jquery.typeahead");describe("Typeahead Sanitize Tests",(()=>{"use strict";let e;beforeAll((()=>{document.body.innerHTML='<input class="js-typeahead">',e=$.typeahead({input:".js-typeahead",minLength:0,generateOnLoad:!0,display:["display"],template:"{{display}} {{details}}",emptyTemplate:"no result for {{query}}",source:[{id:"1",display:"Test & Sanitize",details:"<script>alert('test')<\/script>"},{id:"2",display:"More Test > Sanitize",details:"<script>alert('test')<\/script>"}]})})),it("Should display values",(()=>{e.node.val("test"),e.node.trigger("input"),expect(e.resultCount).toEqual(2),expect(e.resultHtml).toBeDefined(),expect(/<\/?(?:script|iframe)\b[^>]*>/.test(e.resultHtml[0].innerHTML)).toBeFalsy()})),it("Should display sanitized values",(()=>{e.node.val("<script>empty<\/script>"),e.node.trigger("input"),expect(e.resultCount).toEqual(0),expect(e.resultHtml.text()).toEqual("no result for empty")}))}));