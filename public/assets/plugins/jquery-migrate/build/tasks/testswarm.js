"use strict";module.exports=function(r){r.registerTask("testswarm",(function(e,t,s,a,u){var i,o,n,m=require("testswarm"),l={},c=this.async(),h=/PR-(\d+)/.exec(e);s=s||"jquerymigrate",o=r.file.readJSON(t)[s],"["===(a=a||o.browserSets)[0]&&(a=JSON.parse(a)),u=u||9e5,n=r.config("tests")[Array.isArray(a)?a[0]:a||"jquery"],i=h?"Pull <a href='https://github.com/jquery/jquery-migrate/pull/"+h[1]+"'>#"+h[1]+"</a>":"Commit <a href='https://github.com/jquery/jquery-migrate/commit/"+e+"'>"+e.substr(0,10)+"</a>",n.forEach((function(r){var t=r.split("+");l[r]=o.testUrl+e+"/test/index.html?plugin="+t[0]+"&jquery="+t[1]})),m.createClient({url:o.swarmUrl}).addReporter(m.reporters.cli).auth({id:o.authUsername,token:o.authToken}).addjob({name:i,runs:l,runMax:o.runMax,browserSets:a,timeout:u},(function(e,t){e&&r.log.error(e),c(t)}))}))};