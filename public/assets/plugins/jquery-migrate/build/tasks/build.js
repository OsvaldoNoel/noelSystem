"use strict";module.exports=function(e){const t=require("path"),r=require("rollup"),i=t.resolve(`${__dirname}/../..`),s=t.resolve(`${i}/src`),o=(n="wrapper.js",e.file.read(`${s}/${n}`)).split(/[\x20\t]*\/\/ @CODE\n(?:[\x20\t]*\/\/[^\n]+\n)*/);var n;const a={},l={format:"esm",intro:o[0].replace(/\n*$/,""),outro:o[1].replace(/^\n*/,"")};e.registerMultiTask("build","Build jQuery Migrate ECMAScript modules, embed date/version",(async function(){const s=this.async();try{const o=e.config("pkg.version"),n=this.files[0].dest,c=this.files[0].src[0];a.input=t.resolve(`${i}/${c}`);const u=await r.rollup(a),{output:[{code:p}]}=await u.generate(l),d=p.replace(/@VERSION/g,o).replace(/@DATE/g,(new Date).toISOString().replace(/:\d+\.\d+Z$/,"Z"));e.file.write(`${i}/${n}`,d),e.log.ok(`File '${n}' created.`),s()}catch(e){s(e)}}))};