import{jQueryVersionSince}from"../compareVersions.js";import{migratePatchFunc,migrateWarn,migratePatchAndWarnFunc,migrateWarnProp}from"../main.js";import"../disablePatches.js";var findProp,class2type={},oldInit=jQuery.fn.init,oldFind=jQuery.find,rattrHashTest=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,rattrHashGlob=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,rtrim=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;for(findProp in migratePatchFunc(jQuery.fn,"init",(function(e){var r=Array.prototype.slice.call(arguments);return jQuery.migrateIsPatchEnabled("selector-empty-id")&&"string"==typeof e&&"#"===e&&(migrateWarn("selector-empty-id","jQuery( '#' ) is not a valid selector"),r[0]=[]),oldInit.apply(this,r)}),"selector-empty-id"),jQuery.fn.init.prototype=jQuery.fn,migratePatchFunc(jQuery,"find",(function(e){var r=Array.prototype.slice.call(arguments);if("string"==typeof e&&rattrHashTest.test(e))try{window.document.querySelector(e)}catch(t){e=e.replace(rattrHashGlob,(function(e,r,t,n){return"["+r+t+'"'+n+'"]'}));try{window.document.querySelector(e),migrateWarn("selector-hash","Attribute selector with '#' must be quoted: "+r[0]),r[0]=e}catch(e){migrateWarn("selector-hash","Attribute selector with '#' was not fixed: "+r[0])}}return oldFind.apply(this,r)}),"selector-hash"),oldFind)Object.prototype.hasOwnProperty.call(oldFind,findProp)&&(jQuery.find[findProp]=oldFind[findProp]);migratePatchAndWarnFunc(jQuery.fn,"size",(function(){return this.length}),"size","jQuery.fn.size() is deprecated and removed; use the .length property"),migratePatchAndWarnFunc(jQuery,"parseJSON",(function(){return JSON.parse.apply(null,arguments)}),"parseJSON","jQuery.parseJSON is deprecated; use JSON.parse"),migratePatchAndWarnFunc(jQuery,"holdReady",jQuery.holdReady,"holdReady","jQuery.holdReady is deprecated"),migratePatchAndWarnFunc(jQuery,"unique",jQuery.uniqueSort,"unique","jQuery.unique is deprecated; use jQuery.uniqueSort"),migrateWarnProp(jQuery.expr,"filters",jQuery.expr.pseudos,"expr-pre-pseudos","jQuery.expr.filters is deprecated; use jQuery.expr.pseudos"),migrateWarnProp(jQuery.expr,":",jQuery.expr.pseudos,"expr-pre-pseudos","jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos"),jQueryVersionSince("3.1.1")&&migratePatchAndWarnFunc(jQuery,"trim",(function(e){return null==e?"":(e+"").replace(rtrim,"$1")}),"trim","jQuery.trim is deprecated; use String.prototype.trim"),jQueryVersionSince("3.2.0")&&(migratePatchAndWarnFunc(jQuery,"nodeName",(function(e,r){return e.nodeName&&e.nodeName.toLowerCase()===r.toLowerCase()}),"nodeName","jQuery.nodeName is deprecated"),migratePatchAndWarnFunc(jQuery,"isArray",Array.isArray,"isArray","jQuery.isArray is deprecated; use Array.isArray")),jQueryVersionSince("3.3.0")&&(migratePatchAndWarnFunc(jQuery,"isNumeric",(function(e){var r=typeof e;return("number"===r||"string"===r)&&!isNaN(e-parseFloat(e))}),"isNumeric","jQuery.isNumeric() is deprecated"),jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,r){class2type["[object "+r+"]"]=r.toLowerCase()})),migratePatchAndWarnFunc(jQuery,"type",(function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?class2type[Object.prototype.toString.call(e)]||"object":typeof e}),"type","jQuery.type is deprecated"),migratePatchAndWarnFunc(jQuery,"isFunction",(function(e){return"function"==typeof e}),"isFunction","jQuery.isFunction() is deprecated"),migratePatchAndWarnFunc(jQuery,"isWindow",(function(e){return null!=e&&e===e.window}),"isWindow","jQuery.isWindow() is deprecated"));