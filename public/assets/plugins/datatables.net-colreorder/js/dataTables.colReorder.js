/*! For license information please see dataTables.colReorder.js.LICENSE.txt */
!function(t){if("function"==typeof define&&define.amd)define(["jquery","datatables.net"],(function(e){return t(e,window,document)}));else if("object"==typeof exports){var e=require("jquery"),r=function(t,e){e.fn.dataTable||require("datatables.net")(t,e)};"undefined"==typeof window?module.exports=function(o,n){return o||(o=window),n||(n=e(o)),r(o,n),t(n,o,o.document)}:(r(window,e),module.exports=t(e,window,window.document))}else t(jQuery,window,document)}((function(t,e,r){"use strict";var o=t.fn.dataTable;function n(t,e,r,o){var n=t.splice(e,r);n.unshift(0),n.unshift(o<e?o:o-r+1),t.splice.apply(t,n)}function i(t){t.rows().invalidate("data"),t.column(0).visible(t.column(0).visible()),t.columns.adjust();var e=t.colReorder.order();t.trigger("columns-reordered",[{order:e,mapping:u(e)}])}function s(t){return t.settings()[0].aoColumns.map((function(t){return t._crOriginalIdx}))}function a(t,e,r,o){for(var i=[],s=0;s<t.length;s++){var a=t[s];n(a,r[0],r.length,o);for(var l=0;l<a.length;l++){var u=a[l].cell;if(!i.includes(u)){var c=u.getAttribute("data-dt-column").split(",").map((function(t){return e[t]})).join(",");u.setAttribute("data-dt-column",c),i.push(u)}}}}function l(t){t.columns().iterator("column",(function(t,e){var r=t.aoColumns;void 0===r[e]._crOriginalIdx&&(r[e]._crOriginalIdx=e)}))}function u(t){for(var e=[],r=0;r<t.length;r++)e[t[r]]=r;return e}function c(t,e,r){var o,i,s=t.settings()[0],l=s.aoColumns,c=l.map((function(t,e){return e}));if(!e.includes(r)){n(c,e[0],e.length,r);var f=u(c);for(n(l,e[0],e.length,r),o=0;o<s.aoData.length;o++){var h=s.aoData[o];if(h){var p=h.anCells;if(p)for(n(p,e[0],e.length,r),i=0;i<p.length;i++)h.nTr&&p[i]&&l[i].bVisible&&h.nTr.appendChild(p[i]),p[i]&&p[i]._DT_CellIndex&&(p[i]._DT_CellIndex.column=i)}}for(o=0;o<l.length;o++){var g=l[o];for(i=0;i<g.aDataSort.length;i++)g.aDataSort[i]=f[g.aDataSort[i]];g.idx=f[g.idx],g.bVisible&&s.colgroup.append(g.colEl)}a(s.aoHeader,f,e,r),a(s.aoFooter,f,e,r),n(s.aoPreSearchCols,e[0],e.length,r),d(f,s.aaSorting),Array.isArray(s.aaSortingFixed)?d(f,s.aaSortingFixed):(s.aaSortingFixed.pre||s.aaSortingFixed.post)&&d(f,s.aaSortingFixed.pre),s.aLastSort.forEach((function(t){t.src=f[t.src]})),t.trigger("column-reorder",[t.settings()[0],{from:e,to:r,mapping:f}])}}function d(e,r){if(r)for(var o=0;o<r.length;o++){var n=r[o];"number"==typeof n?r[o]=e[n]:t.isPlainObject(n)&&void 0!==n.idx?n.idx=e[n.idx]:Array.isArray(n)&&"number"==typeof n[0]&&(n[0]=e[n[0]])}}function f(t,e,r){var o,s=!1;if(e.length===t.columns().count()){r&&(e=h(t,e,"toCurrent"));var a=u(e);for(o=0;o<a.length;o++){var l=a.indexOf(o);o!==l&&(n(a,l,1,o),c(t,[l],o),s=!0)}s&&i(t)}else t.error("ColReorder - column count mismatch")}function h(t,e,r){var o=t.colReorder.order(),n=t.settings()[0].aoColumns;return"toCurrent"===r||"fromOriginal"===r?Array.isArray(e)?e.map((function(t){return o.indexOf(t)})):o.indexOf(e):Array.isArray(e)?e.map((function(t){return n[t]._crOriginalIdx})):n[e]._crOriginalIdx}function p(t,e,r){var o=t.columns().count();return!(e[0]<r&&r<e[e.length])&&(!(e[0]<0&&e[e.length-1]>o)&&(!(r<0&&r>o)&&(!!e.includes(r)||!!g(t.table().header.structure(),e,r)&&!!g(t.table().footer.structure(),e,r))))}function g(t,e,r){var o,i=function(t){for(var e=[],r=0;r<t.length;r++){e.push([]);for(var o=0;o<t[r].length;o++){var n=t[r][o];if(n)for(var i=0;i<n.rowspan;i++){e[r+i]||(e[r+i]=[]);for(var s=0;s<n.colspan;s++)e[r+i][o+s]=n.cell}}}return e}(t);for(o=0;o<i.length;o++)n(i[o],e[0],e.length,r);for(o=0;o<i.length;o++)for(var s=[],a=0;a<i[o].length;a++){var l=i[o][a];if(s.includes(l)){if(s[s.length-1]!==l)return!1}else s.push(l)}return!0}var m=function(){function e(r,o){this.dom={drag:null},this.c={columns:null,enable:null,order:null},this.s={dropZones:[],mouse:{absLeft:-1,offset:{x:-1,y:-1},start:{x:-1,y:-1},target:null,targets:[]},scrollInterval:null};var n=this;if(!r.settings()[0]._colReorder){r.settings()[0]._colReorder=this,this.dt=r,t.extend(this.c,e.defaults,o),l(r),r.on("stateSaveParams",(function(t,e,o){o.colReorder=s(r)})),r.on("destroy",(function(){r.off(".colReorder"),r.colReorder.reset()}));var i=r.state.loaded(),a=this.c.order;i&&i.colReorder&&(a=i.colReorder),a&&r.ready((function(){f(r,a,!0)})),r.table().header.structure().forEach((function(t){for(var e=0;e<t.length;e++)t[e]&&t[e].cell&&n._addListener(t[e].cell)}))}}return e.prototype.disable=function(){return this.c.enable=!1,this},e.prototype.enable=function(t){return void 0===t&&(t=!0),!1===t?this.disable():(this.c.enable=!0,this)},e.prototype._addListener=function(e){var r=this;t(e).on("selectstart.colReorder",(function(){return!1})).on("mousedown.colReorder touchstart.colReorder",(function(t){"mousedown"===t.type&&1!==t.which||r.c.enable&&r._mouseDown(t,this)}))},e.prototype._createDragNode=function(){var e=this.s.mouse.target,r=e.parent(),o=r.parent(),n=o.parent(),i=e.clone();this.dom.drag=t(n[0].cloneNode(!1)).addClass("dtcr-cloned").append(t(o[0].cloneNode(!1)).append(t(r[0].cloneNode(!1)).append(i[0]))).css({position:"absolute",top:0,left:0,width:t(e).outerWidth(),height:t(e).outerHeight()}).appendTo("body")},e.prototype._cursorPosition=function(t,e){return-1!==t.type.indexOf("touch")?t.originalEvent.touches[0][e]:t[e]},e.prototype._mouseDown=function(e,o){for(var n=this,i=t(e.target).closest("th, td"),s=i.offset(),a=this.dt.columns(this.c.columns).indexes().toArray(),l=t(o).attr("data-dt-column").split(",").map((function(t){return parseInt(t,10)})),u=0;u<l.length;u++)if(!a.includes(l[u]))return!1;this.s.mouse.start.x=this._cursorPosition(e,"pageX"),this.s.mouse.start.y=this._cursorPosition(e,"pageY"),this.s.mouse.offset.x=this._cursorPosition(e,"pageX")-s.left,this.s.mouse.offset.y=this._cursorPosition(e,"pageY")-s.top,this.s.mouse.target=i,this.s.mouse.targets=l;for(var c=0;c<l.length;c++){var d=this.dt.cells(null,l[c],{page:"current"}).nodes().to$(),f="dtcr-moving";0===c&&(f+=" dtcr-moving-first"),c===l.length-1&&(f+=" dtcr-moving-last"),d.addClass(f)}this._regions(l),this._scrollRegions(),t(r).on("mousemove.colReorder touchmove.colReorder",(function(t){n._mouseMove(t)})).on("mouseup.colReorder touchend.colReorder",(function(t){n._mouseUp(t)}))},e.prototype._mouseMove=function(e){if(null===this.dom.drag){if(Math.pow(Math.pow(this._cursorPosition(e,"pageX")-this.s.mouse.start.x,2)+Math.pow(this._cursorPosition(e,"pageY")-this.s.mouse.start.y,2),.5)<5)return;t(r.body).addClass("dtcr-dragging"),this._createDragNode()}this.dom.drag.css({left:this._cursorPosition(e,"pageX")-this.s.mouse.offset.x,top:this._cursorPosition(e,"pageY")-this.s.mouse.offset.y});var o=t(this.dt.table().node()).offset().left,n=this._cursorPosition(e,"pageX")-o,i=this.s.dropZones.find((function(t){return t.left<=n&&n<=t.left+t.width}));this.s.mouse.absLeft=this._cursorPosition(e,"pageX"),i&&(i.self||this._move(i,n))},e.prototype._mouseUp=function(e){t(r).off(".colReorder"),t(r.body).removeClass("dtcr-dragging"),this.dom.drag&&(this.dom.drag.remove(),this.dom.drag=null),this.s.scrollInterval&&clearInterval(this.s.scrollInterval),this.dt.cells(".dtcr-moving").nodes().to$().removeClass("dtcr-moving dtcr-moving-first dtcr-moving-last")},e.prototype._move=function(e,r){var o=this;this.dt.colReorder.move(this.s.mouse.targets,e.colIdx),this.s.mouse.targets=t(this.s.mouse.target).attr("data-dt-column").split(",").map((function(t){return parseInt(t,10)})),this._regions(this.s.mouse.targets);var n=this.s.mouse.targets.filter((function(t){return o.dt.column(t).visible()})),i=this.s.dropZones.find((function(t){return t.colIdx===n[0]})),s=this.s.dropZones.indexOf(i);if(i.left>r){var a=i.left-r,l=this.s.dropZones[s-1];i.left-=a,i.width+=a,l&&(l.width-=a)}if((i=this.s.dropZones.find((function(t){return t.colIdx===n[n.length-1]}))).left+i.width<r){var u=r-(i.left+i.width),c=this.s.dropZones[s+1];i.width+=u,c&&(c.left+=u,c.width-=u)}},e.prototype._regions=function(t){var e=this,r=[],o=0,n=0,i=this.dt.columns(this.c.columns).indexes().toArray(),s=this.dt.columns().widths();this.dt.columns().every((function(a,l,u){if(this.visible()){var c=s[a];if(i.includes(a))p(e.dt,t,a)?r.push({colIdx:a,left:o-n,self:t[0]<=a&&a<=t[t.length-1],width:c+n}):a<t[0]?r.length&&(r[r.length-1].width+=c):a>t[t.length-1]&&(n+=c),o+=c;else o+=c}})),this.s.dropZones=r},e.prototype._isScrolling=function(){return this.dt.table().body().parentNode!==this.dt.table().header().parentNode},e.prototype._scrollRegions=function(){if(this._isScrolling()){var e=this,r=t(this.dt.table().container()).position().left,o=t(this.dt.table().container()).outerWidth(),n=this.dt.table().body().parentElement.parentElement;this.s.scrollInterval=setInterval((function(){var t=e.s.mouse.absLeft;t<r+75&&n.scrollLeft?n.scrollLeft-=5:t>r+o-75&&n.scrollLeft<n.scrollWidth&&(n.scrollLeft+=5)}),25)}},e.defaults={columns:"",enable:!0,order:null},e.version="2.0.3",e}();return o.Api.register("colReorder.enable()",(function(t){return this.iterator("table",(function(e){e._colReorder&&e._colReorder.enable(t)}))})),o.Api.register("colReorder.disable()",(function(){return this.iterator("table",(function(t){t._colReorder&&t._colReorder.disable()}))})),o.Api.register("colReorder.move()",(function(t,e){return l(this),Array.isArray(t)||(t=[t]),p(this,t,e)?this.tables().every((function(){c(this,t,e),i(this)})):(this.error("ColReorder - invalid move"),this)})),o.Api.register("colReorder.order()",(function(t,e){return l(this),t?this.tables().every((function(){f(this,t,e)})):this.context.length?s(this):null})),o.Api.register("colReorder.reset()",(function(){return l(this),this.tables().every((function(){f(this,this.columns().every((function(t){return t})).flatten().toArray(),!0)}))})),o.Api.register("colReorder.transpose()",(function(t,e){return l(this),e||(e="toCurrent"),h(this,t,e)})),o.ColReorder=m,t(r).on("stateLoadInit.dt",(function(t,e,r){if("dt"===t.namespace){var n=new o.Api(e);if(r.colReorder)if(n.ready())f(n,r.colReorder,!0);else{d(u(r.colReorder),r.order);for(var i=0;i<r.columns.length;i++)r.columns[i]._cr_sort=r.colReorder[i];r.columns.sort((function(t,e){return t._cr_sort-e._cr_sort}))}}})),t(r).on("preInit.dt",(function(e,r){if("dt"===e.namespace){var n=r.oInit.colReorder,i=o.defaults.colReorder;if(n||i){var s=t.extend({},i,n);if(!1!==n){var a=new o.Api(r);new m(a,s)}}}})),o}));