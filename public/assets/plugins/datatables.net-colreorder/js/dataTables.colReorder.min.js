/*! For license information please see dataTables.colReorder.min.js.LICENSE.txt */
!function(t){var e,o;"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function(e){return t(e,window,document)})):"object"==typeof exports?(e=require("jquery"),o=function(t,e){e.fn.dataTable||require("datatables.net")(t,e)},"undefined"==typeof window?module.exports=function(r,n){return r=r||window,n=n||e(r),o(r,n),t(n,0,r.document)}:(o(window,e),module.exports=t(e,window,window.document))):t(jQuery,window,document)}((function(t,e,o){"use strict";var r=t.fn.dataTable;function n(t,e,o,r){var n=t.splice(e,o);n.unshift(0),n.unshift(r<e?r:r-o+1),t.splice.apply(t,n)}function s(t){t.rows().invalidate("data"),t.column(0).visible(t.column(0).visible()),t.columns.adjust();var e=t.colReorder.order();t.trigger("columns-reordered",[{order:e,mapping:d(e)}])}function i(t){return t.settings()[0].aoColumns.map((function(t){return t._crOriginalIdx}))}function l(t,e,o,r){for(var s=[],i=0;i<t.length;i++){var l=t[i];n(l,o[0],o.length,r);for(var a=0;a<l.length;a++){var d,c=l[a].cell;s.includes(c)||(d=c.getAttribute("data-dt-column").split(",").map((function(t){return e[t]})).join(","),c.setAttribute("data-dt-column",d),s.push(c))}}}function a(t){t.columns().iterator("column",(function(t,e){void 0===(t=t.aoColumns)[e]._crOriginalIdx&&(t[e]._crOriginalIdx=e)}))}function d(t){for(var e=[],o=0;o<t.length;o++)e[t[o]]=o;return e}function c(t,e,o){var r,s=t.settings()[0],i=s.aoColumns,a=i.map((function(t,e){return e}));if(!e.includes(o)){n(a,e[0],e.length,o);var c=d(a);for(n(i,e[0],e.length,o),r=0;r<s.aoData.length;r++){var h=s.aoData[r];if(h){var f=h.anCells;if(f)for(n(f,e[0],e.length,o),g=0;g<f.length;g++)h.nTr&&f[g]&&i[g].bVisible&&h.nTr.appendChild(f[g]),f[g]&&f[g]._DT_CellIndex&&(f[g]._DT_CellIndex.column=g)}}for(r=0;r<i.length;r++){for(var p=i[r],g=0;g<p.aDataSort.length;g++)p.aDataSort[g]=c[p.aDataSort[g]];p.idx=c[p.idx],p.bVisible&&s.colgroup.append(p.colEl)}l(s.aoHeader,c,e,o),l(s.aoFooter,c,e,o),n(s.aoPreSearchCols,e[0],e.length,o),u(c,s.aaSorting),Array.isArray(s.aaSortingFixed)?u(c,s.aaSortingFixed):(s.aaSortingFixed.pre||s.aaSortingFixed.post)&&u(c,s.aaSortingFixed.pre),s.aLastSort.forEach((function(t){t.src=c[t.src]})),t.trigger("column-reorder",[t.settings()[0],{from:e,to:o,mapping:c}])}}function u(e,o){if(o)for(var r=0;r<o.length;r++){var n=o[r];"number"==typeof n?o[r]=e[n]:t.isPlainObject(n)&&void 0!==n.idx?n.idx=e[n.idx]:Array.isArray(n)&&"number"==typeof n[0]&&(n[0]=e[n[0]])}}function h(t,e,o){var r=!1;if(e.length!==t.columns().count())t.error("ColReorder - column count mismatch");else{for(var i=d(e=o?f(t,e,"toCurrent"):e),l=0;l<i.length;l++){var a=i.indexOf(l);l!==a&&(n(i,a,1,l),c(t,[a],l),r=!0)}r&&s(t)}}function f(t,e,o){var r=t.colReorder.order(),n=t.settings()[0].aoColumns;return"toCurrent"===o||"fromOriginal"===o?Array.isArray(e)?e.map((function(t){return r.indexOf(t)})):r.indexOf(e):Array.isArray(e)?e.map((function(t){return n[t]._crOriginalIdx})):n[e]._crOriginalIdx}function p(t,e,o){var r=t.columns().count();return!(e[0]<o&&o<e[e.length]||e[0]<0&&e[e.length-1]>r||o<0&&r<o||!e.includes(o)&&(!g(t.table().header.structure(),e,o)||!g(t.table().footer.structure(),e,o)))}function g(t,e,o){for(var r=function(t){for(var e=[],o=0;o<t.length;o++){e.push([]);for(var r=0;r<t[o].length;r++){var n=t[o][r];if(n)for(var s=0;s<n.rowspan;s++){e[o+s]||(e[o+s]=[]);for(var i=0;i<n.colspan;i++)e[o+s][r+i]=n.cell}}}return e}(t),s=0;s<r.length;s++)n(r[s],e[0],e.length,o);for(s=0;s<r.length;s++)for(var i=[],l=0;l<r[s].length;l++){var a=r[s][l];if(i.includes(a)){if(i[i.length-1]!==a)return}else i.push(a)}return 1}v.prototype.disable=function(){return this.c.enable=!1,this},v.prototype.enable=function(t){return!1===(t=void 0===t||t)?this.disable():(this.c.enable=!0,this)},v.prototype._addListener=function(e){var o=this;t(e).on("selectstart.colReorder",(function(){return!1})).on("mousedown.colReorder touchstart.colReorder",(function(t){"mousedown"===t.type&&1!==t.which||o.c.enable&&o._mouseDown(t,this)}))},v.prototype._createDragNode=function(){var e=this.s.mouse.target,o=e.parent(),r=o.parent(),n=r.parent(),s=e.clone();this.dom.drag=t(n[0].cloneNode(!1)).addClass("dtcr-cloned").append(t(r[0].cloneNode(!1)).append(t(o[0].cloneNode(!1)).append(s[0]))).css({position:"absolute",top:0,left:0,width:t(e).outerWidth(),height:t(e).outerHeight()}).appendTo("body")},v.prototype._cursorPosition=function(t,e){return(-1!==t.type.indexOf("touch")?t.originalEvent.touches[0]:t)[e]},v.prototype._mouseDown=function(e,r){for(var n=this,s=t(e.target).closest("th, td"),i=s.offset(),l=this.dt.columns(this.c.columns).indexes().toArray(),a=t(r).attr("data-dt-column").split(",").map((function(t){return parseInt(t,10)})),d=0;d<a.length;d++)if(!l.includes(a[d]))return!1;this.s.mouse.start.x=this._cursorPosition(e,"pageX"),this.s.mouse.start.y=this._cursorPosition(e,"pageY"),this.s.mouse.offset.x=this._cursorPosition(e,"pageX")-i.left,this.s.mouse.offset.y=this._cursorPosition(e,"pageY")-i.top,this.s.mouse.target=s,this.s.mouse.targets=a;for(var c=0;c<a.length;c++){var u=this.dt.cells(null,a[c],{page:"current"}).nodes().to$(),h="dtcr-moving";0===c&&(h+=" dtcr-moving-first"),c===a.length-1&&(h+=" dtcr-moving-last"),u.addClass(h)}this._regions(a),this._scrollRegions(),t(o).on("mousemove.colReorder touchmove.colReorder",(function(t){n._mouseMove(t)})).on("mouseup.colReorder touchend.colReorder",(function(t){n._mouseUp(t)}))},v.prototype._mouseMove=function(e){if(null===this.dom.drag){if(Math.pow(Math.pow(this._cursorPosition(e,"pageX")-this.s.mouse.start.x,2)+Math.pow(this._cursorPosition(e,"pageY")-this.s.mouse.start.y,2),.5)<5)return;t(o.body).addClass("dtcr-dragging"),this._createDragNode()}this.dom.drag.css({left:this._cursorPosition(e,"pageX")-this.s.mouse.offset.x,top:this._cursorPosition(e,"pageY")-this.s.mouse.offset.y});var r=t(this.dt.table().node()).offset().left,n=this._cursorPosition(e,"pageX")-r;r=this.s.dropZones.find((function(t){return t.left<=n&&n<=t.left+t.width}));this.s.mouse.absLeft=this._cursorPosition(e,"pageX"),r&&!r.self&&this._move(r,n)},v.prototype._mouseUp=function(e){t(o).off(".colReorder"),t(o.body).removeClass("dtcr-dragging"),this.dom.drag&&(this.dom.drag.remove(),this.dom.drag=null),this.s.scrollInterval&&clearInterval(this.s.scrollInterval),this.dt.cells(".dtcr-moving").nodes().to$().removeClass("dtcr-moving dtcr-moving-first dtcr-moving-last")},v.prototype._move=function(e,o){var r,n,s=this,i=(this.dt.colReorder.move(this.s.mouse.targets,e.colIdx),this.s.mouse.targets=t(this.s.mouse.target).attr("data-dt-column").split(",").map((function(t){return parseInt(t,10)})),this._regions(this.s.mouse.targets),this.s.mouse.targets.filter((function(t){return s.dt.column(t).visible()}))),l=(e=this.s.dropZones.find((function(t){return t.colIdx===i[0]})),this.s.dropZones.indexOf(e));e.left>o&&(n=e.left-o,r=this.s.dropZones[l-1],e.left-=n,e.width+=n,r)&&(r.width-=n),(e=this.s.dropZones.find((function(t){return t.colIdx===i[i.length-1]}))).left+e.width<o&&(r=o-(e.left+e.width),n=this.s.dropZones[l+1],e.width+=r,n)&&(n.left+=r,n.width-=r)},v.prototype._regions=function(t){var e=this,o=[],r=0,n=0,s=this.dt.columns(this.c.columns).indexes().toArray(),i=this.dt.columns().widths();this.dt.columns().every((function(l,a,d){var c;this.visible()&&(c=i[l],s.includes(l)&&(p(e.dt,t,l)?o.push({colIdx:l,left:r-n,self:t[0]<=l&&l<=t[t.length-1],width:c+n}):l<t[0]?o.length&&(o[o.length-1].width+=c):l>t[t.length-1]&&(n+=c)),r+=c)})),this.s.dropZones=o},v.prototype._isScrolling=function(){return this.dt.table().body().parentNode!==this.dt.table().header().parentNode},v.prototype._scrollRegions=function(){var e,o,r,n;this._isScrolling()&&(o=t((e=this).dt.table().container()).position().left,r=t(this.dt.table().container()).outerWidth(),n=this.dt.table().body().parentElement.parentElement,this.s.scrollInterval=setInterval((function(){var t=e.s.mouse.absLeft;t<o+75&&n.scrollLeft?n.scrollLeft-=5:o+r-75<t&&n.scrollLeft<n.scrollWidth&&(n.scrollLeft+=5)}),25))},v.defaults={columns:"",enable:!0,order:null},v.version="2.0.3";var m=v;function v(e,o){this.dom={drag:null},this.c={columns:null,enable:null,order:null},this.s={dropZones:[],mouse:{absLeft:-1,offset:{x:-1,y:-1},start:{x:-1,y:-1},target:null,targets:[]},scrollInterval:null};var r,n=this;e.settings()[0]._colReorder||((e.settings()[0]._colReorder=this).dt=e,t.extend(this.c,v.defaults,o),a(e),e.on("stateSaveParams",(function(t,o,r){r.colReorder=i(e)})),e.on("destroy",(function(){e.off(".colReorder"),e.colReorder.reset()})),o=e.state.loaded(),r=this.c.order,(r=o&&o.colReorder?o.colReorder:r)&&e.ready((function(){h(e,r,!0)})),e.table().header.structure().forEach((function(t){for(var e=0;e<t.length;e++)t[e]&&t[e].cell&&n._addListener(t[e].cell)})))}return r.Api.register("colReorder.enable()",(function(t){return this.iterator("table",(function(e){e._colReorder&&e._colReorder.enable(t)}))})),r.Api.register("colReorder.disable()",(function(){return this.iterator("table",(function(t){t._colReorder&&t._colReorder.disable()}))})),r.Api.register("colReorder.move()",(function(t,e){return a(this),p(this,t=Array.isArray(t)?t:[t],e)?this.tables().every((function(){c(this,t,e),s(this)})):(this.error("ColReorder - invalid move"),this)})),r.Api.register("colReorder.order()",(function(t,e){return a(this),t?this.tables().every((function(){h(this,t,e)})):this.context.length?i(this):null})),r.Api.register("colReorder.reset()",(function(){return a(this),this.tables().every((function(){h(this,this.columns().every((function(t){return t})).flatten().toArray(),!0)}))})),r.Api.register("colReorder.transpose()",(function(t,e){return a(this),f(this,t,e=e||"toCurrent")})),r.ColReorder=m,t(o).on("stateLoadInit.dt",(function(t,e,o){if("dt"===t.namespace&&(t=new r.Api(e),o.colReorder))if(t.ready())h(t,o.colReorder,!0);else{u(d(o.colReorder),o.order);for(var n=0;n<o.columns.length;n++)o.columns[n]._cr_sort=o.colReorder[n];o.columns.sort((function(t,e){return t._cr_sort-e._cr_sort}))}})),t(o).on("preInit.dt",(function(e,o){var n,s;"dt"===e.namespace&&(e=o.oInit.colReorder,s=r.defaults.colReorder,e||s)&&(n=t.extend({},s,e),!1!==e)&&(s=new r.Api(o),new m(s,n))})),r}));