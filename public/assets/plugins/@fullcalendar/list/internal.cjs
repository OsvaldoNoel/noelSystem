"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var internal_cjs=require("@fullcalendar/core/internal.cjs"),preact_cjs=require("@fullcalendar/core/preact.cjs");class ListViewHeaderRow extends internal_cjs.BaseComponent{constructor(){super(...arguments),this.state={textId:internal_cjs.getUniqueDomId()}}render(){let{theme:e,dateEnv:t,options:n,viewApi:a}=this.context,{cellId:r,dayDate:s,todayRange:i}=this.props,{textId:l}=this.state,c=internal_cjs.getDateMeta(s,i),o=n.listDayFormat?t.format(s,n.listDayFormat):"",d=n.listDaySideFormat?t.format(s,n.listDaySideFormat):"",f=Object.assign({date:t.toDate(s),view:a,textId:l,text:o,sideText:d,navLinkAttrs:internal_cjs.buildNavLinkAttrs(this.context,s),sideNavLinkAttrs:internal_cjs.buildNavLinkAttrs(this.context,s,"day",!1)},c);return preact_cjs.createElement(internal_cjs.ContentContainer,{elTag:"tr",elClasses:["fc-list-day",...internal_cjs.getDayClassNames(c,e)],elAttrs:{"data-date":internal_cjs.formatDayString(s)},renderProps:f,generatorName:"dayHeaderContent",customGenerator:n.dayHeaderContent,defaultGenerator:renderInnerContent,classNameGenerator:n.dayHeaderClassNames,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},(t=>preact_cjs.createElement("th",{scope:"colgroup",colSpan:3,id:r,"aria-labelledby":l},preact_cjs.createElement(t,{elTag:"div",elClasses:["fc-list-day-cushion",e.getClass("tableCellShaded")]}))))}}function renderInnerContent(e){return preact_cjs.createElement(preact_cjs.Fragment,null,e.text&&preact_cjs.createElement("a",Object.assign({id:e.textId,className:"fc-list-day-text"},e.navLinkAttrs),e.text),e.sideText&&preact_cjs.createElement("a",Object.assign({"aria-hidden":!0,className:"fc-list-day-side-text"},e.sideNavLinkAttrs),e.sideText))}const DEFAULT_TIME_FORMAT=internal_cjs.createFormatter({hour:"numeric",minute:"2-digit",meridiem:"short"});class ListViewEventRow extends internal_cjs.BaseComponent{render(){let{props:e,context:t}=this,{options:n}=t,{seg:a,timeHeaderId:r,eventHeaderId:s,dateHeaderId:i}=e,l=n.eventTimeFormat||DEFAULT_TIME_FORMAT;return preact_cjs.createElement(internal_cjs.EventContainer,Object.assign({},e,{elTag:"tr",elClasses:["fc-list-event",a.eventRange.def.url&&"fc-event-forced-url"],defaultGenerator:()=>renderEventInnerContent(a,t),seg:a,timeText:"",disableDragging:!0,disableResizing:!0}),((e,n)=>preact_cjs.createElement(preact_cjs.Fragment,null,buildTimeContent(a,l,t,r,i),preact_cjs.createElement("td",{"aria-hidden":!0,className:"fc-list-event-graphic"},preact_cjs.createElement("span",{className:"fc-list-event-dot",style:{borderColor:n.borderColor||n.backgroundColor}})),preact_cjs.createElement(e,{elTag:"td",elClasses:["fc-list-event-title"],elAttrs:{headers:`${s} ${i}`}}))))}}function renderEventInnerContent(e,t){let n=internal_cjs.getSegAnchorAttrs(e,t);return preact_cjs.createElement("a",Object.assign({},n),e.eventRange.def.title)}function buildTimeContent(e,t,n,a,r){let{options:s}=n;if(!1!==s.displayEventTime){let i,l=e.eventRange.def,c=e.eventRange.instance,o=!1;if(l.allDay?o=!0:internal_cjs.isMultiDayRange(e.eventRange.range)?e.isStart?i=internal_cjs.buildSegTimeText(e,t,n,null,null,c.range.start,e.end):e.isEnd?i=internal_cjs.buildSegTimeText(e,t,n,null,null,e.start,c.range.end):o=!0:i=internal_cjs.buildSegTimeText(e,t,n),o){let e={text:n.options.allDayText,view:n.viewApi};return preact_cjs.createElement(internal_cjs.ContentContainer,{elTag:"td",elClasses:["fc-list-event-time"],elAttrs:{headers:`${a} ${r}`},renderProps:e,generatorName:"allDayContent",customGenerator:s.allDayContent,defaultGenerator:renderAllDayInner,classNameGenerator:s.allDayClassNames,didMount:s.allDayDidMount,willUnmount:s.allDayWillUnmount})}return preact_cjs.createElement("td",{className:"fc-list-event-time"},i)}return null}function renderAllDayInner(e){return e.text}class ListView extends internal_cjs.DateComponent{constructor(){super(...arguments),this.computeDateVars=internal_cjs.memoize(computeDateVars),this.eventStoreToSegs=internal_cjs.memoize(this._eventStoreToSegs),this.state={timeHeaderId:internal_cjs.getUniqueDomId(),eventHeaderId:internal_cjs.getUniqueDomId(),dateHeaderIdRoot:internal_cjs.getUniqueDomId()},this.setRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e}):this.context.unregisterInteractiveComponent(this)}}render(){let{props:e,context:t}=this,{dayDates:n,dayRanges:a}=this.computeDateVars(e.dateProfile),r=this.eventStoreToSegs(e.eventStore,e.eventUiBases,a);return preact_cjs.createElement(internal_cjs.ViewContainer,{elRef:this.setRootEl,elClasses:["fc-list",t.theme.getClass("table"),!1!==t.options.stickyHeaderDates?"fc-list-sticky":""],viewSpec:t.viewSpec},preact_cjs.createElement(internal_cjs.Scroller,{liquid:!e.isHeightAuto,overflowX:e.isHeightAuto?"visible":"hidden",overflowY:e.isHeightAuto?"visible":"auto"},r.length>0?this.renderSegList(r,n):this.renderEmptyMessage()))}renderEmptyMessage(){let{options:e,viewApi:t}=this.context,n={text:e.noEventsText,view:t};return preact_cjs.createElement(internal_cjs.ContentContainer,{elTag:"div",elClasses:["fc-list-empty"],renderProps:n,generatorName:"noEventsContent",customGenerator:e.noEventsContent,defaultGenerator:renderNoEventsInner,classNameGenerator:e.noEventsClassNames,didMount:e.noEventsDidMount,willUnmount:e.noEventsWillUnmount},(e=>preact_cjs.createElement(e,{elTag:"div",elClasses:["fc-list-empty-cushion"]})))}renderSegList(e,t){let{theme:n,options:a}=this.context,{timeHeaderId:r,eventHeaderId:s,dateHeaderIdRoot:i}=this.state,l=groupSegsByDay(e);return preact_cjs.createElement(internal_cjs.NowTimer,{unit:"day"},((e,c)=>{let o=[];for(let n=0;n<l.length;n+=1){let d=l[n];if(d){let l=internal_cjs.formatDayString(t[n]),f=i+"-"+l;o.push(preact_cjs.createElement(ListViewHeaderRow,{key:l,cellId:f,dayDate:t[n],todayRange:c})),d=internal_cjs.sortEventSegs(d,a.eventOrder);for(let t of d)o.push(preact_cjs.createElement(ListViewEventRow,Object.assign({key:l+":"+t.eventRange.instance.instanceId,seg:t,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,timeHeaderId:r,eventHeaderId:s,dateHeaderId:f},internal_cjs.getSegMeta(t,c,e))))}}return preact_cjs.createElement("table",{className:"fc-list-table "+n.getClass("table")},preact_cjs.createElement("thead",null,preact_cjs.createElement("tr",null,preact_cjs.createElement("th",{scope:"col",id:r},a.timeHint),preact_cjs.createElement("th",{scope:"col","aria-hidden":!0}),preact_cjs.createElement("th",{scope:"col",id:s},a.eventHint))),preact_cjs.createElement("tbody",null,o))}))}_eventStoreToSegs(e,t,n){return this.eventRangesToSegs(internal_cjs.sliceEventStore(e,t,this.props.dateProfile.activeRange,this.context.options.nextDayThreshold).fg,n)}eventRangesToSegs(e,t){let n=[];for(let a of e)n.push(...this.eventRangeToSegs(a,t));return n}eventRangeToSegs(e,t){let n,a,r,{dateEnv:s}=this.context,{nextDayThreshold:i}=this.context.options,l=e.range,c=e.def.allDay,o=[];for(n=0;n<t.length;n+=1)if(a=internal_cjs.intersectRanges(l,t[n]),a&&(r={component:this,eventRange:e,start:a.start,end:a.end,isStart:e.isStart&&a.start.valueOf()===l.start.valueOf(),isEnd:e.isEnd&&a.end.valueOf()===l.end.valueOf(),dayIndex:n},o.push(r),!r.isEnd&&!c&&n+1<t.length&&l.end<s.add(t[n+1].start,i))){r.end=l.end,r.isEnd=!0;break}return o}}function renderNoEventsInner(e){return e.text}function computeDateVars(e){let t=internal_cjs.startOfDay(e.renderRange.start),n=e.renderRange.end,a=[],r=[];for(;t<n;)a.push(t),r.push({start:t,end:internal_cjs.addDays(t,1)}),t=internal_cjs.addDays(t,1);return{dayDates:a,dayRanges:r}}function groupSegsByDay(e){let t,n,a=[];for(t=0;t<e.length;t+=1)n=e[t],(a[n.dayIndex]||(a[n.dayIndex]=[])).push(n);return a}var css_248z=':root{--fc-list-event-dot-width:10px;--fc-list-event-hover-bg-color:#f5f5f5}.fc-theme-standard .fc-list{border:1px solid var(--fc-border-color)}.fc .fc-list-empty{align-items:center;background-color:var(--fc-neutral-bg-color);display:flex;height:100%;justify-content:center}.fc .fc-list-empty-cushion{margin:5em 0}.fc .fc-list-table{border-style:hidden;width:100%}.fc .fc-list-table tr>*{border-left:0;border-right:0}.fc .fc-list-sticky .fc-list-day>*{background:var(--fc-page-bg-color);position:sticky;top:0}.fc .fc-list-table thead{left:-10000px;position:absolute}.fc .fc-list-table tbody>tr:first-child th{border-top:0}.fc .fc-list-table th{padding:0}.fc .fc-list-day-cushion,.fc .fc-list-table td{padding:8px 14px}.fc .fc-list-day-cushion:after{clear:both;content:"";display:table}.fc-theme-standard .fc-list-day-cushion{background-color:var(--fc-neutral-bg-color)}.fc-direction-ltr .fc-list-day-text,.fc-direction-rtl .fc-list-day-side-text{float:left}.fc-direction-ltr .fc-list-day-side-text,.fc-direction-rtl .fc-list-day-text{float:right}.fc-direction-ltr .fc-list-table .fc-list-event-graphic{padding-right:0}.fc-direction-rtl .fc-list-table .fc-list-event-graphic{padding-left:0}.fc .fc-list-event.fc-event-forced-url{cursor:pointer}.fc .fc-list-event:hover td{background-color:var(--fc-list-event-hover-bg-color)}.fc .fc-list-event-graphic,.fc .fc-list-event-time{white-space:nowrap;width:1px}.fc .fc-list-event-dot{border:calc(var(--fc-list-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-list-event-dot-width)/2);box-sizing:content-box;display:inline-block;height:0;width:0}.fc .fc-list-event-title a{color:inherit;text-decoration:none}.fc .fc-list-event.fc-event-forced-url:hover a{text-decoration:underline}';internal_cjs.injectStyles(css_248z),exports.ListView=ListView;