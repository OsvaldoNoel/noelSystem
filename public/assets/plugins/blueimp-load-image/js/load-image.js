!function(e){"use strict";var n=e.URL||e.webkitURL;function t(e){return!!n&&n.createObjectURL(e)}function o(e){return!!n&&n.revokeObjectURL(e)}function r(e,n){!e||"blob:"!==e.slice(0,5)||n&&n.noRevoke||o(e)}function i(n,t,o,r){if(!e.FileReader)return!1;var i=new FileReader;i.onload=function(){t.call(i,this.result)},o&&(i.onabort=i.onerror=function(){o.call(i,this.error)});var c=i[r||"readAsDataURL"];return c?(c.call(i,n),i):void 0}function c(e,n){return Object.prototype.toString.call(n)==="[object "+e+"]"}function a(n,o,u){function f(o,f){var l,s=document.createElement("img");function d(e,n){o!==f?e instanceof Error?f(e):((n=n||{}).image=e,o(n)):o&&o(e,n)}function b(o,r){r&&e.console&&console.log(r),o&&c("Blob",o)?l=t(n=o):(l=n,u&&u.crossOrigin&&(s.crossOrigin=u.crossOrigin)),s.src=l}return s.onerror=function(e){r(l,u),f&&f.call(s,e)},s.onload=function(){r(l,u);var e={originalWidth:s.naturalWidth||s.width,originalHeight:s.naturalHeight||s.height};try{a.transform(s,u,d,n,e)}catch(e){f&&f(e)}},"string"==typeof n?(a.requiresMetaData(u)?a.fetchBlob(n,b,u):b(),s):c("Blob",n)||c("File",n)?(l=t(n))?(s.src=l,s):i(n,(function(e){s.src=e}),f):void 0}return e.Promise&&"function"!=typeof o?(u=o,new Promise(f)):f(o,o)}a.requiresMetaData=function(e){return e&&e.meta},a.fetchBlob=function(e,n){n()},a.transform=function(e,n,t,o,r){t(e,r)},a.global=e,a.readFile=i,a.isInstanceOf=c,a.createObjectURL=t,a.revokeObjectURL=o,"function"==typeof define&&define.amd?define((function(){return a})):"object"==typeof module&&module.exports?module.exports=a:e.loadImage=a}("undefined"!=typeof window&&window||this);