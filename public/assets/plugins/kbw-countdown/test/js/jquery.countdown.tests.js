$((function(){clearInterval($.countdown._timer);var t=sinon.useFakeTimers(new Date(2016,6,1,12,0,0,0).getTime());function n(t){return $("#cd").hasClass("is-countdown")&&$("#cd").countdown("destroy"),$("#cd").countdown($.extend({description:"descr"},t||{}))}function e(t){var n=[];return n[0]=t.match("y")?"?":t.match("Y")?"!":null,n[1]=t.match("o")?"?":t.match("O")?"!":null,n[2]=t.match("w")?"?":t.match("W")?"!":null,n[3]=t.match("d")?"?":t.match("D")?"!":null,n[4]=t.match("h")?"?":t.match("H")?"!":null,n[5]=t.match("m")?"?":t.match("M")?"!":null,n[6]=t.match("s")?"?":t.match("S")?"!":null,n}function o(t,n,e){null!=t&&null!=n?(t.setMilliseconds(0),n.setMilliseconds(0),equal(t.toString(),n.toString(),e)):ok(!1,e+" - null time")}$.noRequestAnimationFrame=!0,$.JQPlugin.createPlugin("countdown",{name:"countdown"}),test("Set defaults",(function(){expect(3),equal($.countdown.defaultOptions.alwaysExpire,!1,"Initial alwaysExpire"),$.extend($.countdown.defaultOptions,{alwaysExpire:!0}),equal($.countdown.defaultOptions.alwaysExpire,!0,"Changed alwaysExpire"),$.countdown.setDefaults({alwaysExpire:!1}),equal($.countdown.defaultOptions.alwaysExpire,!1,"Set defaults alwaysExpire")})),test("UTC date",(function(){expect(10);var t=new Date(2009,0,26,11,30),n=600+t.getTimezoneOffset();o($.countdown.UTCDate(-t.getTimezoneOffset(),t),t,"UTC date - local offset"),o($.countdown.UTCDate(7,t),new Date(2009,0,26,14,30-n),"UTC date - +7"),o($.countdown.UTCDate(60,t),new Date(2009,0,26,20,30-n),"UTC date - +60"),o($.countdown.UTCDate(-300,t),new Date(2009,0,27,2,30-n),"UTC date - -300"),o($.countdown.UTCDate(-8,t),new Date(2009,0,27,5,30-n),"UTC date - -8"),o($.countdown.UTCDate(-t.getTimezoneOffset(),2009,0,26,11,30),t,"UTC date - local offset"),o($.countdown.UTCDate(7,2009,0,26,11,30),new Date(2009,0,26,14,30-n),"UTC date - +7"),o($.countdown.UTCDate(60,2009,0,26,11,30),new Date(2009,0,26,20,30-n),"UTC date - +60"),o($.countdown.UTCDate(-300,2009,0,26,11,30),new Date(2009,0,27,2,30-n),"UTC date - -300"),o($.countdown.UTCDate(-8,2009,0,26,11,30),new Date(2009,0,27,5,30-n),"UTC date - -8")})),test("Destroy",(function(){expect(6);var t=n();ok(void 0!==t.data("countdown"),"Instance present"),ok(""!==t.html(),"Content present"),ok(t.is(".is-countdown"),"Marker class present"),t.countdown("destroy"),t=$("#cd"),ok(void 0===t.data("countdown"),"Instance gone"),ok(""===t.html(),"Content gone"),ok(!t.is(".is-countdown"),"Marker class gone")})),test("Content",(function(){expect(23);var t=n();equal(t.text(),"0Hours0Minutes0Secondsdescr","Content - default"),t.countdown("option",{until:5,description:""}),equal(t.text(),"0Hours0Minutes5Seconds","Content full - +5"),t.countdown("option",{until:3665}),equal(t.text(),"1Hour1Minute5Seconds","Content full - +3665"),t.countdown("option",{until:5,format:"MS"}),equal(t.text(),"0Minutes5Seconds","Content full - +5 MS"),t.countdown("option",{until:65,format:"MS"}),equal(t.text(),"1Minute5Seconds","Content full - +65 MS"),t.countdown("option",{until:5,format:"S"}),equal(t.text(),"5Seconds","Content full - +5 S"),t.countdown("option",{until:65,format:"S"}),equal(t.text(),"65Seconds","Content full - +65 S"),t.countdown("option",{until:5,format:"M"}),equal(t.text(),"1Minute","Content full - +5 M"),t.countdown("option",{until:65,format:"M"}),equal(t.text(),"2Minutes","Content full - +65 M"),t.countdown("option",{until:5,format:"H"}),equal(t.text(),"1Hour","Content full - +5 H"),t.countdown("option",{until:3665,format:"H"}),equal(t.text(),"2Hours","Content full - +3665 H"),t.countdown("option",{until:"+1y+2o+3d+4h+5m+6s",format:"yodHMS"}),equal(t.text(),"1Year2Months3Days4Hours5Minutes6Seconds","Content full - +1y+2o+3d+4h+5m+6s yodHMS"),t.countdown("option",{until:5,compact:!0,format:"dHMS"}),equal(t.text(),"00:00:05","Content compact - +5"),t.countdown("option",{until:3665}),equal(t.text(),"01:01:05","Content compact - +3665"),t.countdown("option",{until:5,format:"MS"}),equal(t.text(),"00:05","Content compact - +5 MS"),t.countdown("option",{until:65,format:"MS"}),equal(t.text(),"01:05","Content compact - +65 MS"),t.countdown("option",{until:5,format:"S"}),equal(t.text(),"05","Content compact - +5 S"),t.countdown("option",{until:65,format:"S"}),equal(t.text(),"65","Content compact - +65 S"),t.countdown("option",{until:5,format:"M"}),equal(t.text(),"01","Content compact - +5 M"),t.countdown("option",{until:65,format:"M"}),equal(t.text(),"02","Content compact - +65 M"),t.countdown("option",{until:5,format:"H"}),equal(t.text(),"01","Content compact - +5 H"),t.countdown("option",{until:3665,format:"H"}),equal(t.text(),"02","Content compact - +3665 H"),t.countdown("option",{until:"+1y+2o+3d+4h+5m+6s",format:"yodHMS"}),equal(t.text(),"1y 2m 3d 04:05:06","Content compact - +1y+2o+3d+4h+5m+6s yodHMS")})),test("Option",(function(){expect(9);var t=n(),e=t.data("countdown");equal(e.options.description,"descr","Default description - descr"),t.countdown("option",{description:"abcdef"}),equal(e.options.description,"abcdef","Change description - abcdef"),$("#cd:first").countdown("option",{description:"uvwxyz"}),equal(e.options.description,"uvwxyz","Change description - uvwxyz"),t.countdown("option",{description:"descr"}),equal(e.options.description,"descr","Change description - descr"),t.countdown("option","description","abcdef"),equal(e.options.description,"abcdef","Change description - abcdef"),t.countdown("option","description","descr"),equal(e.options.description,"descr","Change description - descr"),deepEqual(t.countdown("option"),{labels:["Years","Months","Weeks","Days","Hours","Minutes","Seconds"],labels1:["Year","Month","Week","Day","Hour","Minute","Second"],compactLabels:["y","m","w","d"],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:!1,until:null,since:null,timezone:null,serverSync:null,format:"dHMS",layout:"",compact:!1,padZeroes:!1,significant:0,description:"descr",expiryUrl:"",expiryText:"",alwaysExpire:!1,onExpiry:null,onTick:null,tickInterval:1},"Settings - instance"),equal(t.countdown("option","description"),"descr","Settings - description"),equal(t.countdown("option","layout"),"","Settings - layout")})),test("Timezones",(function(){expect(6);var t=n(),e=t.data("countdown"),u=new Date;u.setHours(u.getHours()+3);var i=600+u.getTimezoneOffset(),s=new Date;s.setHours(s.getHours()+3),t.countdown("option",{until:u}),o(e._until,s,"Timezone - null"),t.countdown("option",{timezone:7}),s.setHours(s.getHours()+3),s.setMinutes(s.getMinutes()-i),o(e._until,s,"Timezone - +7"),t.countdown("option",{timezone:240}),s.setHours(s.getHours()+3),o(e._until,s,"Timezone - +240"),t.countdown("option",{timezone:-2}),s.setHours(s.getHours()+6),o(e._until,s,"Timezone - -2"),t.countdown("option",{timezone:-480}),s.setHours(s.getHours()+6),o(e._until,s,"Timezone - -480"),t.countdown("option",{timezone:null}),s.setHours(s.getHours()-18),s.setMinutes(s.getMinutes()+i),o(e._until,s,"Timezone - null")})),test("Server sync",(function(){expect(2);var t=n(),e=t.data("countdown"),u=function(t){return function(){var n=new Date;return n.setMinutes(n.getMinutes()+t),n}},i=new Date;i.setHours(i.getHours()+3);var s=new Date;s.setHours(s.getHours()+3),s.setMinutes(s.getMinutes()-5),t.countdown("option",{until:i,serverSync:u(5)}),o(e._until,s,"Server sync - +5"),s.setMinutes(s.getMinutes()+10),t.countdown("option",{until:i,serverSync:u(-5)}),o(e._until,s,"Server sync - -5")})),test("Server resync",(function(){expect(3);var t=n(),e=t.data("countdown"),u=0,i=new Date;i.setHours(i.getHours()+3);var s=new Date;s.setHours(s.getHours()+3),t.countdown("option",{until:i,serverSync:function(){var t=new Date;return t.setMinutes(t.getMinutes()+u),t}}),o(e._until,s,"Server resync - 0"),u=10,s.setMinutes(s.getMinutes()-10),$.countdown.resync(),o(e._until,s,"Server resync - +10"),u=-5,s.setMinutes(s.getMinutes()+15),$.countdown.resync(),o(e._until,s,"Server resync - -5")})),test("Until",(function(){expect(19);var t=n(),e=t.data("countdown"),u=new Date;o(e._until,u,"Until - null");var i=new Date;i.setHours(i.getHours()+1),t.countdown("option",{until:i}),o(e._until,i,"Until - absolute +1H"),(i=new Date).setSeconds(i.getSeconds()+200),t.countdown("option",{until:200}),o(e._until,i,"Until - +200"),(i=new Date).setSeconds(i.getSeconds()+20),t.countdown("option",{until:"+20s"}),o(e._until,i,"Until - +20s"),(i=new Date).setSeconds(i.getSeconds()+40),t.countdown("option",{until:" +40 S "}),o(e._until,i,"Until - +40 S"),(i=new Date).setMinutes(i.getMinutes()+10),t.countdown("option",{until:"+10m"}),o(e._until,i,"Until - +10m"),(i=new Date).setMinutes(i.getMinutes()+25),t.countdown("option",{until:" +25 M "}),o(e._until,i,"Until - +25 M"),(i=new Date).setHours(i.getHours()+3),t.countdown("option",{until:"+3h"}),o(e._until,i,"Until - +3h"),(i=new Date).setHours(i.getHours()+15),t.countdown("option",{until:" +15 H "}),o(e._until,i,"Until - +15 H"),(i=new Date).setDate(i.getDate()+4),t.countdown("option",{until:"+4d"}),o(e._until,i,"Until - +4d"),(i=new Date).setDate(i.getDate()+30),t.countdown("option",{until:" +30 D "}),o(e._until,i,"Until - +30 D"),(i=new Date).setDate(i.getDate()+14),t.countdown("option",{until:"+2w"}),o(e._until,i,"Until - +2w"),(i=new Date).setDate(i.getDate()+70),t.countdown("option",{until:" +10 W "}),o(e._until,i,"Until - +10 W"),(i=new Date).setMonth(i.getMonth()+2),t.countdown("option",{until:"+2o"}),o(e._until,i,"Until - +2o"),(i=new Date).setMonth(i.getMonth()+12),t.countdown("option",{until:" +12 O "}),o(e._until,i,"Until - +12 O"),(i=new Date).setFullYear(i.getFullYear()+2),t.countdown("option",{until:"+2y"}),o(e._until,i,"Until - +2y"),(i=new Date).setFullYear(i.getFullYear()+5),t.countdown("option",{until:" +5 Y "}),o(e._until,i,"Until - +5 Y"),(i=new Date).setDate(i.getDate()+14),i.setHours(i.getHours()+2),t.countdown("option",{until:"+2w +2h"}),o(e._until,i,"Until - +2w +2h"),(i=new Date).setFullYear(i.getFullYear()+5),i.setMonth(i.getMonth()+1),t.countdown("option",{until:" +5 Y  +1 O"}),o(e._until,i,"Until - until +5 Y +1 O"),t.countdown("option",{until:null})})),test("Since",(function(){expect(20);var t=n(),e=t.data("countdown");new Date;ok(null===e._since,"Since - null");var u=new Date;u.setHours(u.getHours()-1),t.countdown("option",{since:u}),o(e._since,u,"Since - absolute -1H"),u=new Date,t.countdown("option",{since:0}),o(e._since,u,"Since - 0"),u.setSeconds(u.getSeconds()-200),t.countdown("option",{since:-200}),o(e._since,u,"Since - -200"),(u=new Date).setSeconds(u.getSeconds()-20),t.countdown("option",{since:"-20s"}),o(e._since,u,"Since - -20s"),(u=new Date).setSeconds(u.getSeconds()-40),t.countdown("option",{since:" -40 S "}),o(e._since,u,"Since - -40 S"),(u=new Date).setMinutes(u.getMinutes()-10),t.countdown("option",{since:"-10m"}),o(e._since,u,"Since - -10m"),(u=new Date).setMinutes(u.getMinutes()-25),t.countdown("option",{since:" -25 M "}),o(e._since,u,"Since - -25 M"),(u=new Date).setHours(u.getHours()-3),t.countdown("option",{since:"-3h"}),o(e._since,u,"Since - -3h"),(u=new Date).setHours(u.getHours()-15),t.countdown("option",{since:" -15 H "}),o(e._since,u,"Since - -15 H"),(u=new Date).setDate(u.getDate()-4),t.countdown("option",{since:"-4d"}),o(e._since,u,"Since - -4d"),(u=new Date).setDate(u.getDate()-30),t.countdown("option",{since:" -30 D "}),o(e._since,u,"Since - -30 D"),(u=new Date).setDate(u.getDate()-14),t.countdown("option",{since:"-2w"}),o(e._since,u,"Since - -2w"),(u=new Date).setDate(u.getDate()-70),t.countdown("option",{since:" -10 W "}),o(e._since,u,"Since - -10 W"),(u=new Date).setMonth(u.getMonth()-2),t.countdown("option",{since:"-2o"}),o(e._since,u,"Since - -2o"),(u=new Date).setMonth(u.getMonth()-12),t.countdown("option",{since:" -12 O "}),o(e._since,u,"Since - -12 O"),(u=new Date).setFullYear(u.getFullYear()-2),t.countdown("option",{since:"-2y"}),o(e._since,u,"Since - -2y"),(u=new Date).setFullYear(u.getFullYear()-5),t.countdown("option",{since:" -5 Y "}),o(e._since,u,"Since - -5 Y"),(u=new Date).setDate(u.getDate()-14),u.setHours(u.getHours()-2),t.countdown("option",{since:"-2w -2h"}),o(e._since,u,"Since - -2w -2h"),(u=new Date).setFullYear(u.getFullYear()-5),u.setMonth(u.getMonth()-1),t.countdown("option",{since:" -5 Y  -1 O"}),o(e._since,u,"Since - -5 Y -1 O"),t.countdown("option",{since:null})})),test("Get",(function(){expect(2);var t=n().data("countdown");equal($.countdown.defaultOptions.description,"","Default description"),equal(t.options.description,"descr","Instance description")})),test("Get times",(function(){expect(7);var t=n();t.data("countdown");t.countdown("option",{format:"YOWDHMS"}),deepEqual(t.countdown("getTimes"),[0,0,0,0,0,0,0],"Get time - nothing set"),t.countdown("option",{until:"+1y +2o +3w +4d +5h +6m +7s"}),deepEqual(t.countdown("getTimes"),[1,2,3,4,5,6,7],"Get time - until +1y +2o +3w +4d +5h +6m +7s"),t.countdown("option",{until:"+1y +3w +5h +7s"}),deepEqual(t.countdown("getTimes"),[1,0,3,0,5,0,7],"Get time - until +1y +3w +5h +7s"),t.countdown("option",{until:"+2o +4d +6m"}),deepEqual(t.countdown("getTimes"),[0,2,0,4,0,6,0],"Get time - until +2o +4d +6m"),t.countdown("option",{since:"-1y -2o -3w -4d -5h -6m -7s"}),deepEqual(t.countdown("getTimes"),[1,2,3,4,5,6,7],"Get time - since -1y -2o -3w -4d -5h -6m -7s"),t.countdown("option",{since:"-1y -3w -5h -7s"}),deepEqual(t.countdown("getTimes"),[1,0,3,0,5,0,7],"Get time - since -1y -3w -5h -7s"),t.countdown("option",{since:"-2o -4d -6m"}),deepEqual(t.countdown("getTimes"),[0,2,0,4,0,6,0],"Get time - since -2o -4d -6m")})),test("Calculate periods",(function(){expect(38);var t=n(),o=t.data("countdown");t.countdown("option",{until:"+1y +2o +3d +4h +5m +6s"});var u=new Date;deepEqual($.countdown._calculatePeriods(o,e("yodHMS"),0,u),[1,2,0,3,4,5,6],"Calculate periods - yodHMS until +1y +2o +3d +4h +5m +6s"),u.setMilliseconds(0);var i=Math.floor((o._until.getTime()-u.getTime())/864e5);u=new Date,deepEqual($.countdown._calculatePeriods(o,e("YODHMS"),0,u),[1,2,0,3,4,5,6],"Calculate periods - YODHMS until +1y +2o +3d +4h +5m +6s"),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("odHMS"),0,u),[0,14,0,3,4,5,6],"Calculate periods - odHMS until +1y +2o +3d +4h +5m +6s"),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("wHMS"),0,u),[0,0,Math.floor(i/7),0,i%7*24+4,5,6],"Calculate periods - wHMS until +1y +2o +3d +4h +5m +6s"),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("dHMS"),0,u),[0,0,0,i,4,5,6],"Calculate periods - dHMS until +1y +2o +3d +4h +5m +6s"),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("hms"),0,u),[0,0,0,0,24*i+4,5,6],"Calculate periods - hms until +1y +2o +3d +4h +5m +6s"),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("MS"),0,u),[0,0,0,0,0,60*(24*i+4)+5,6],"Calculate periods - MS until +1y +2o +3d +4h +5m +6s"),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("s"),0,u),[0,0,0,0,0,0,60*(60*(24*i+4)+5)+6],"Calculate periods - s until +1y +2o +3d +4h +5m +6s"),(u=new Date).setFullYear(u.getFullYear()+1),u.setMilliseconds(0),i=Math.floor((o._until.getTime()-u.getTime())/864e5),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("YDS"),0,u),[1,0,0,i,0,0,14706],"Calculate periods - YDS until +1y +2o +3d +4h +5m +6s"),t.countdown("option",{until:new Date(2009,6,20)}),u=new Date(2009,3,20,11),deepEqual($.countdown._calculatePeriods(o,e("OWDHM"),0,u),[0,2,4,1,13,0,0],"Calculate periods - OWDHM until start of today + 3 months"),t.countdown("option",{until:new Date(2009,5,30)}),u=new Date(2009,2,31),deepEqual($.countdown._calculatePeriods(o,e("OWDHM"),0,u),[0,3,0,0,0,0,0],"Calculate periods - OWDHM until 31/03 to 30/06"),u=new Date(2009,2,31,11),deepEqual($.countdown._calculatePeriods(o,e("OWDHM"),0,u),[0,2,4,1,13,0,0],"Calculate periods - OWDHM until 31/03 11:00 to 30/06 00:00"),t.countdown("option",{until:new Date(2009,7,31)}),u=new Date(2009,5,30),deepEqual($.countdown._calculatePeriods(o,e("OWDHM"),0,u),[0,2,0,0,0,0,0],"Calculate periods - OWDHM until 30/06 to 31/08"),u=new Date(2009,5,30,11),deepEqual($.countdown._calculatePeriods(o,e("OWDHM"),0,u),[0,1,4,2,13,0,0],"Calculate periods - OWDHM until 30/06 11:00 to 31/08 00:00"),t.countdown("option",{until:"13d 23h 59m 10s",format:"YOWDHM"}),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("YOWDHM"),0,u),[0,0,2,0,0,0,0],"Calculate periods - YOWDHM until 13d 23h 59m 10s"),t.countdown("option",{until:"13d 23h 59m -10s",format:"YOWDHM"}),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("YOWDHM"),0,u),[0,0,1,6,23,59,0],"Calculate periods - YOWDHM until 13d 23h 59m -10s"),t.countdown("option",{until:"13d 23h 10s",format:"YOWDH"}),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("YOWDH"),0,u),[0,0,2,0,0,0,0],"Calculate periods - YOWDH until 13d 23h 10s"),t.countdown("option",{until:"13d 23h -10s",format:"YOWDH"}),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("YOWDH"),0,u),[0,0,1,6,23,0,0],"Calculate periods - YOWDH until 13d 23h -10s"),t.countdown("option",{until:"13d 23h 59m 10s",format:"YOWDM"}),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("YOWDM"),0,u),[0,0,2,0,0,0,0],"Calculate periods - YOWDM until 13d 23h 59m 10s"),t.countdown("option",{until:"13d 23h 59m -10s",format:"YOWDM"}),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("YOWDM"),0,u),[0,0,1,6,0,1439,0],"Calculate periods - YOWDM until 13d 23h 59m -10s"),t.countdown("option",{until:"13d 23h 59m 10s",format:"YOWD"}),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("YOWD"),0,u),[0,0,2,0,0,0,0],"Calculate periods - YOWD until 13d 23h 59m 10s"),t.countdown("option",{until:"13d 23h 59m -10s",format:"YOWD"}),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("YOWD"),0,u),[0,0,2,0,0,0,0],"Calculate periods - YOWD until 13d 23h 59m -10s"),t.countdown("option",{since:"-1y -2o -3d -4h -5m -6s",until:null});u=new Date;deepEqual($.countdown._calculatePeriods(o,e("yodHMS"),0,u),[1,2,0,3,4,5,6],"Calculate periods - yodHMS since -1y -2o -3d -4h -5m -6s"),u.setMilliseconds(0),i=Math.floor((u.getTime()-o._since.getTime())/864e5),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("YODHMS"),0,u),[1,2,0,3,4,5,6],"Calculate periods - YODHMS since -1y -2o -3d -4h -5m -6s"),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("odHMS"),0,u),[0,14,0,3,4,5,6],"Calculate periods - odHMS since -1y -2o -3d -4h -5m -6s"),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("wHMS"),0,u),[0,0,Math.floor(i/7),0,i%7*24+4,5,6],"Calculate periods - wHMS since -1y -2o -3d -4h -5m -6s"),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("dHMS"),0,u),[0,0,0,i,4,5,6],"Calculate periods - dHMS since -1y -2o -3d -4h -5m -6s"),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("hms"),0,u),[0,0,0,0,24*i+4,5,6],"Calculate periods - hms since -1y -2o -3d -4h -5m -6s"),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("MS"),0,u),[0,0,0,0,0,60*(24*i+4)+5,6],"Calculate periods - MS since -1y -2o -3d -4h -5m -6s"),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("s"),0,u),[0,0,0,0,0,0,60*(60*(24*i+4)+5)+6],"Calculate periods - s since -1y -2o -3d -4h -5m -6s"),(u=new Date).setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0);var s=new Date(o._since.getTime());s.setFullYear(s.getFullYear()+1),s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),i=Math.ceil((u.getTime()-s.getTime())/864e5),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("YDS"),0,u),[1,0,0,i,0,0,14706],"Calculate periods - YDS since -1y -2o -3d -4h -5m -6s"),t.countdown("option",{since:new Date(2009,3,20,11)}),u=new Date(2009,6,20),deepEqual($.countdown._calculatePeriods(o,e("OWDHM"),0,u),[0,2,4,1,13,0,0],"Calculate periods - OWDHM since start of today - 3 months"),t.countdown("option",{since:new Date(2009,6,31)}),u=new Date(2009,8,30),deepEqual($.countdown._calculatePeriods(o,e("OWDHM"),0,u),[0,2,0,0,0,0,0],"Calculate periods - OWDHM since 31/07 to 30/09"),t.countdown("option",{since:new Date(2009,6,31,11)}),deepEqual($.countdown._calculatePeriods(o,e("OWDHM"),0,u),[0,1,4,1,13,0,0],"Calculate periods - OWDHM since 31/07 11:00 to 30/09 00:00"),t.countdown("option",{since:new Date(2009,5,30)}),u=new Date(2009,7,31),deepEqual($.countdown._calculatePeriods(o,e("OWDHM"),0,u),[0,2,0,0,0,0,0],"Calculate periods - OWDHM since 30/06 to 31/08"),t.countdown("option",{since:new Date(2009,5,30,11)}),deepEqual($.countdown._calculatePeriods(o,e("OWDHM"),0,u),[0,1,4,2,13,0,0],"Calculate periods - OWDHM since 30/06 11:00 to 31/08 00:00"),t.countdown("option",{since:"-13d -23h -59m 10s",format:"YOWDHM"}),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("YOWDHM"),0,u),[0,0,1,6,23,58,0],"Calculate periods - YOWDHM since -13d -23h -59m 10s"),t.countdown("option",{since:"-13d -23h -59m -10s",format:"YOWDHM"}),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("YOWDHM"),0,u),[0,0,1,6,23,59,0],"Calculate periods - YOWDHM since -13d -23h -59m -10s")})),test("Significant",(function(){expect(11);var t=n({format:"yowdHMS",description:""}),o=t.data("countdown");t.countdown("option",{until:"+1y +2o +3d +4h +5m +6s",significant:2});var u=new Date;deepEqual($.countdown._calculatePeriods(o,e("yodHMS"),2,u),[1,2,0,0,0,0,0],"Significant periods - 2 yodHMS until +1y +2o +3d +4h +5m +6s"),equal(t.text(),"1Year2Months","Significant text - 2"),t.countdown("option",{until:"+1y +2o +3d +4h +5m +6s",significant:3}),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("yodHMS"),3,u),[1,2,0,3,0,0,0],"Significant periods - 3 yodHMS until +1y +2o +3d +4h +5m +6s"),equal(t.text(),"1Year2Months3Days","Significant text - 3"),t.countdown("option",{until:"+4h",significant:2}),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("yodHMS"),2,u),[0,0,0,0,4,0,0],"Significant periods - 2 yodHMS until +4h"),equal(t.text(),"4Hours0Seconds","Significant text - 2"),t.countdown("option",{until:"+4h",format:"dHM",significant:2}),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("dHM"),2,u),[0,0,0,0,4,0,0],"Significant periods - 2 dHM until +4h"),equal(t.text(),"4Hours0Minutes","Significant text - 2"),t.countdown("option",{until:"+4h",format:"dHM",significant:3}),u=new Date,deepEqual($.countdown._calculatePeriods(o,e("dHM"),3,u),[0,0,0,0,4,0,0],"Significant periods - 3 dHM until +4h"),equal(t.text(),"0Days4Hours0Minutes","Significant text - 3"),t.countdown("option",{until:"+1y +2o +3d +4h +5m +6s",format:"yodHMS",significant:3,layout:"{y<}{yn} {yl} {y>}{o<}{on} {ol} {o>}{w<}{wn} {wl} {w>}{d<}{dn} {dl} {d>}{h<}{hn} {hl} {h>}{m<}{mn} {ml} {m>}{s<}{sn} {sl}{s>}"}),u=new Date,equal(t.text(),"1 Year 2 Months 3 Days ","Significant layout - 3")})),test("Periods to seconds",(function(){expect(3),equal($.countdown.periodsToSeconds([0,0,0,0,1,2,3]),3723,"Periods to seconds - 0, 0, 0, 0, 1, 2, 3"),equal($.countdown.periodsToSeconds([0,0,1,2,0,0,0]),777600,"Periods to seconds - 0, 0, 1, 2, 0, 0, 0"),equal($.countdown.periodsToSeconds([1,2,0,3,4,5,6]),37091106,"Periods to seconds - 1, 2, 0, 3, 4, 5, 6")})),test("Layouts",(function(){expect(16);var t=n(),o=t.data("countdown"),u=e("YODHMS");t.countdown("option",{until:"+1y +2o +3d +4h +5m +6s",format:"YODHMS",description:"until then"}),equal($.countdown._buildLayout(o,u,"{yn} {yl}",!1),"1 Year","Layout - {yn} {yl}"),equal($.countdown._buildLayout(o,u,"{on} {ol}",!1),"2 Months","Layout - {on} {ol}"),equal($.countdown._buildLayout(o,u,"{wn} {wl}",!1),"0 Weeks","Layout - {wn} {wl}"),equal($.countdown._buildLayout(o,u,"{dn} {dl}",!1),"3 Days","Layout - {dn} {dl}"),equal($.countdown._buildLayout(o,u,"{hn} {hl}",!1),"4 Hours","Layout - {hn} {hl}"),equal($.countdown._buildLayout(o,u,"{mn} {ml}",!1),"5 Minutes","Layout - {mn} {ml}"),equal($.countdown._buildLayout(o,u,"{sn} {sl}",!1),"6 Seconds","Layout - {sn} {sl}"),equal($.countdown._buildLayout(o,u,"{yn} {yl}, {on} {ol}, {dn} {dl}, {hn} {hl}, {mn} {ml}, {sn} {sl}",!1),"1 Year, 2 Months, 3 Days, 4 Hours, 5 Minutes, 6 Seconds","Layout - {yn} {yl}, {on} {ol}, {dn} {dl}, {hn} {hl}, {mn} {ml}, {sn} {sl}"),equal($.countdown._buildLayout(o,u,"{ynn} {yl} + {onn} {ol} + {dnn} {dl} and {hnn} {hl}:{mnn} {ml}:{snn} {sl}",!1),"01 Year + 02 Months + 03 Days and 04 Hours:05 Minutes:06 Seconds","Layout - {ynn} {yl} + {onn} {ol} + {dnn} {dl} and {hnn} {hl}:{mnn} {ml}:{snn} {sl}"),equal($.countdown._buildLayout(o,u,"{ynnn} {yl} + {onnn} {ol} + {dnnn} {dl} and {hnnn} {hl}:{mnnn} {ml}:{snnn} {sl}",!1),"001 Year + 002 Months + 003 Days and 004 Hours:005 Minutes:006 Seconds","Layout - {ynnn} {yl} + {onnn} {ol} + {dnnn} {dl} and {hnnn} {hl}:{mnnn} {ml}:{snnn} {sl}"),equal($.countdown._buildLayout(o,u,"<ul><li>{yn} {yl}</li><li>{on} {ol}</li><li>{dn} {dl}</li><li>{hn} {hl}</li><li>{mn} {ml}</li><li>{sn} {sl}</li></ul>",!1),"<ul><li>1 Year</li><li>2 Months</li><li>3 Days</li><li>4 Hours</li><li>5 Minutes</li><li>6 Seconds</li></ul>","Layout - <ul><li>{yn} {yl}</li><li>{on} {ol}</li><li>{dn} {dl}</li><li>{hn} {hl}</li><li>{mn} {ml}</li><li>{sn} {sl}</li></ul>"),equal($.countdown._buildLayout(o,u,"{hn} {hl}, {mn} {ml}, {sn} {sl} ({hnn}:{mnn}:{snn})",!1),"4 Hours, 5 Minutes, 6 Seconds (04:05:06)","Layout - {hn} {hl}, {mn} {ml}, {sn} {sl} ({hnn}:{mnn}:{snn})"),t.countdown("option",{compactLabels1:["Yr","Mn","W","Dy"]}),equal($.countdown._buildLayout(o,u,"{yn} {yl}, {on} {ol}, {dn} {dl}, {hnn}{sep}{mnn}{sep}{snn} {desc}",!0),"1 Yr, 2 m, 3 d, 04:05:06 until then","Layout - {yn} {yl}, {on} {ol}, {dn} {dl}, {hnn}{sep}{mnn}{sep}{snn} {desc}"),u=e("OHMS"),t.countdown("option",{format:"OHMS"}),equal($.countdown._buildLayout(o,u,"{y<}{yn} {yl}, {y>}{o<}{on} {ol}, {o>}{d<}{dn} {dl}, {d>}{h<}{hn} {hl}, {h>}{m<}{mn} {ml}, {m>}{s<}{sn} {sl}{s>}",!1),"14 Months, 76 Hours, 5 Minutes, 6 Seconds","Layout - {y<}{yn} {yl}, {y>}{o<}{on} {ol}, {o>}{d<}{dn} {dl}, {d>}{h<}{hn} {hl}, {h>}{m<}{mn} {ml}, {m>}{s<}{sn} {sl}{s>}"),u=e("YODHMS"),t.countdown("option",{format:"YODHMS",until:"+123y +2o +15d +16h +37m +48s"}),equal($.countdown._buildLayout(o,u,"{y100} {y10} {y1} {o100} {o10} {o1} {w100} {w10} {w1} {d100} {d10} {d1} {h100} {h10} {h1} {m100} {m10} {m1} {s100} {s10} {s1}",!1),"1 2 3 0 0 2 0 0 0 0 1 5 0 1 6 0 3 7 0 4 8","Layout - {y100} {y10} {y1} {o100} {o10} {o1} {w100} {w10} {w1} {d100} {d10} {d1} {h100} {h10} {h1} {m100} {m10} {m1} {s100} {s10} {s1}"),equal($.countdown._buildLayout(o,u,"{} {x100} {xn} {xl}",!1),"{} {x100} {xn} {xl}","Layout - {} {x100} {xn} {xl}")})),test("Labels",(function(){expect(4);var t=n(),e=["Y2ars","M2nths","W2eks","D2ys","H2urs","M2nutes","S2conds"],o=["Y3ars","M3nths","W3eks","D3ys","H3urs","M3nutes","S3conds"];t.countdown("option",{until:"+1y+2o+3d+4h+5m+6s",format:"yodHMS",description:""}),equal(t.text(),"1Year2Months3Days4Hours5Minutes6Seconds","Labels standard - +1y+2o+3d+4h+5m+6s yodHMS"),t.countdown("option",{until:"+1y+2o+3d+4h+5m+6s",labels2:e,labels3:o}),equal(t.text(),"1Year2M2nths3D3ys4Hours5Minutes6Seconds","Labels custom - +1y+2o+3d+4h+5m+6s yodHMS"),t.countdown("option",{until:"+1y+2o+3d+4h+5m+6s",labels:$.countdown.defaultOptions.labels}),equal(t.text(),"1Year2Months3Days4Hours5Minutes6Seconds","Labels reset - +1y+2o+3d+4h+5m+6s yodHMS"),t.countdown("option",{until:"+1y+2o+3d+4h+5m+6s",labels2:e,labels3:o,whichLabels:function(t){return t%2+2}}),equal(t.text(),"1Y3ars2M2nths3D3ys4H2urs5M3nutes6S2conds","Labels which - +1y+2o+3d+4h+5m+6s yodHMS")})),test("Digits",(function(){expect(3);var t=n({digits:["A","B","C","D","E","F","G","H","I","J"]});t.countdown("option",{until:"+1y+2o+3d+4h+5m+6s",format:"yodHMS",description:""}),equal(t.text(),"BYearCMonthsDDaysEHoursFMinutesGSeconds","Digits - +1y+2o+3d+4h+5m+6s yodHMS"),t.countdown("option",{until:"+1y+2o+3d+4h+5m+6s",compact:!0}),equal(t.text(),"By Cm Dd AE:AF:AG","Digits compact - +1y+2o+3d+4h+5m+6s yodHMS"),t.countdown("option",{until:"+1y+2o+3d+4h+5m+6s",layout:"{ynnn} {onn} {dn} {h10}{h1}:{m10}{m1}:{s10}{s1}"}),equal(t.text(),"AAB AC D AE:AF:AG","Digits layout - +1y+2o+3d+4h+5m+6s yodHMS")})),test("Expiry",(function(){expect(4);var t=!1,e=n({onExpiry:function(){t=!0},alwaysExpire:!0,description:""});equal(t,!0,"Expiry - onExpiry"),equal(e.text(),"0Hours0Minutes0Seconds","Expiry - no expiryText"),t=!1,e.countdown("option",{onExpiry:null,expiryText:"All over"}),equal(t,!1,"Expiry - no onExpiry"),equal(e.text(),"All over","Expiry - expiryText")})),test("Pause",(function(){expect(4);var e=n({until:5,description:""});equal(e.text(),"0Hours0Minutes5Seconds","Pause - initial"),t.tick(1e3),equal(e.text(),"0Hours0Minutes4Seconds","Pause - tick"),e.countdown("pause"),t.tick(2e3),equal(e.text(),"0Hours0Minutes4Seconds","Pause - paused"),e.countdown("resume"),t.tick(2e3),equal(e.text(),"0Hours0Minutes2Seconds","Pause - resumed")})),test("Pause toggle",(function(){expect(4);var e=n({until:5,description:""});equal(e.text(),"0Hours0Minutes5Seconds","Pause toggle - initial"),t.tick(1e3),equal(e.text(),"0Hours0Minutes4Seconds","Pause toggle - tick"),e.countdown("toggle"),t.tick(2e3),equal(e.text(),"0Hours0Minutes4Seconds","Pause toggle - paused"),e.countdown("toggle"),t.tick(2e3),equal(e.text(),"0Hours0Minutes2Seconds","Pause toggle - resumed")})),test("Lap",(function(){expect(4);var e=n({until:5,description:""});equal(e.text(),"0Hours0Minutes5Seconds","Lap - initial"),t.tick(1e3),equal(e.text(),"0Hours0Minutes4Seconds","Lap - tick"),e.countdown("lap"),t.tick(2e3),equal(e.text(),"0Hours0Minutes4Seconds","Lap - paused"),e.countdown("resume"),t.tick(2e3),equal(e.text(),"0Hours0Minutes0Seconds","Lap - resumed")})),test("Lap toggle",(function(){expect(4);var e=n({until:5,description:""});equal(e.text(),"0Hours0Minutes5Seconds","Lap toggle - initial"),t.tick(1e3),equal(e.text(),"0Hours0Minutes4Seconds","Lap toggle - tick"),e.countdown("toggleLap"),t.tick(2e3),equal(e.text(),"0Hours0Minutes4Seconds","Lap toggle - paused"),e.countdown("toggleLap"),t.tick(2e3),equal(e.text(),"0Hours0Minutes0Seconds","Lap toggle - resumed")}))}));