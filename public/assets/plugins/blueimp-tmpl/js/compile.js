#!/usr/bin/env node
!function(){"use strict";var e,r=require("path"),n=require(r.join(__dirname,"tmpl.js")),t=require("fs"),i=t.readFileSync(r.join(__dirname,"runtime.js"),"utf8"),s=/<script( id="([\w-]+)")? type="text\/x-tmpl"( id="([\w-]+)")?>([\s\S]+?)<\/script>/gi,o=new RegExp(n.helper.match(/\w+(?=\s*=\s*function\s*\()/g).join("\\s*\\(|")+"\\s*\\("),c=[];n.print=function(e){var r=o.test(e)?n.helper:"",t=e.replace(n.regexp,n.func);return(r||/_e\s*\(/.test(t))&&(r="_e=tmpl.encode"+r+","),"function("+n.arg+",tmpl){"+("var "+r+"_s='"+t+"';return _s;").split("_s+='';").join("")+"}"},process.argv.forEach((function(e,i){var o,p,l,a=c.length;if(i>1){if(!t.statSync(e).isFile())return void console.error(e+" is not a file.");for(o=t.readFileSync(e,"utf8");p=s.exec(o);)l=p[2]||p[4],c.push("'"+l+"':"+n.print(p[5]));a===c.length&&(l=r.basename(e,r.extname(e)),c.push("'"+l+"':"+n.print(o)))}})),c.length?(e=i.replace("{}","{"+c.join(",")+"}"),console.log(e)):console.error("Missing input file.")}();